(function(){var e={9796:function(e,l,t){"use strict";var o=t(7387),a=t.n(o),i=t(8082),s=t.n(i);const n="P5P1SIqVe6kaOxMX",r=(e,l)=>{var t=s().enc.Utf8.parse(l||n),o=s().enc.Utf8.parse(e),a=s().AES.encrypt(o,t,{mode:s().mode.ECB,padding:s().pad.Pkcs7});return a.toString()},u=(e,l)=>{var t=s().enc.Utf8.parse(l||n),o=s().AES.decrypt(e,t,{mode:s().mode.ECB,padding:s().pad.Pkcs7});return s().enc.Utf8.stringify(o).toString()};var d=t(9242),c=t(3396);function p(e,l,t,o,a,i){const s=(0,c.up)("FrameWork");return(0,c.wg)(),(0,c.j4)(s)}var m=t(7139),v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAB/dJREFUeF7tnbGv5VMQx2f/yNUoNAqFQqFQSKxCoVAoFAqNQrEbghCCEIQQhCBBCBtCEIIQgrD22rPZt8l7d+/Ombn3fGc+t74z58znO5/87ktu7jtlvCAAgRMJnIINBCBwMgEEYTsgsIUAgrAeEEAQdgACPgI8QXzcqGpCAEGaBM2YPgII4uNGVRMCCNIkaMb0EUAQHzeqmhBAkCZBM6aPAIL4uFHVhACCNAmaMX0EEMTHjaomBBCkSdCM6SOAID5uVDUhgCBNgmZMHwEE8XGjqgkBBGkSNGP6CCCIjxtVTQggSJOgGdNHAEF83KhqQgBBmgTNmD4CCOLjRlUTAgjSJGjG9BHYCHLBV0oVBOoTQJD6GTPhBAEEmYBHaX0CCFI/YyacIIAgE/AorU8AQepnzIQTBBBkAh6l9QkgSP2MmXCCAIJMwKO0PgEEqZ8xE04QQJAJeJTWJ4Ag9TNmwgkCCDIBj9L6BBCkfsZMOEEAQSbgUVqfAILUz5gJJwggyAQ8SusTQJD6GTPhBAEEmYBHaX0CCFI/YyacIIAgE/AorU8AQepnzIQTBBBkAh6l9QkgSP2MmXCCAIJMwKO0PgEEqZ8xE04QQJAJeJTWJ4Ag9TNmwgkCCDIBj9L6BBCkfsZMOEEAQSbgUVqfAILUz5gJJwioC3LOzE5PzE8pBLYSUBbkETO70czOIglbnkVAVZCHzeymI1CQJGtDmvdVFOQhM7v5mNyQpPkyZ4yvJsiDZnbLFhBIkrEljXsqCfKAmd26Q1ZIsgMk3rIbARVB7jez23Yb6f93Icl1wOKtJxNQEOQ+M7vdESKSOKBRcjWB1QW518zumAgNSSbgUWq2siD3mNmdASEhSQDEri1WFeTui4GcCQwFSQJhdmq1qiCbDJCk0yYuOuvKgiDJokvT6VqrC4IknbZxwVkVBEGSBReny5VUBEGSLhu52JxKgiDJYsvT4TpqgiBJh61caEZFQZBkoQWqfhVVQZCk+mYuMp+yIEiyyBJVvoa6IEhSeTsXmK2CIEiywCJVvUIVQZCk6oYeeK5KgiDJgZep4vHVBEGSilt6wJkqCoIkB1yoakdXFQRJqm3qgeapLAiSHGipKh1bXRAkqbStB5ilgyBIcoDFqnJkF0GQpMrG7nmOToIgyZ6Xq8Jx3QRBkgpbu8cZOgqCJHtcMPWjugqCJOqbu6f7dxYESfa0ZMrHdBcESZS3dw93R5BLkPmZ0z0sm+IRCHIlNSRR3ODkOyPI1YCRJHnh1NojyJXEPjSzG8zso6AQT49/BRfUjjaHIIAgl6h/MOT4OCgE5AgCeeg2CGL2/pDjk6AwkCMI5Aptugvy3pDj06AwkCMI5CptOgvy7pDjs6AwkCMI5EptugryzpDj86AwkCMI5GptOgry9pDji6AwkCMI5Iptugny1pDjfFAYyBEEctU2nQR5c8jxZVAYyBEEcuU2XQR5Y8jxVVAYyBEEcvU2HQR5fcjxdVAYyBEEUqFNdUFeG3J8ExQGcgSBVGlTWZBXhxzfBoWBHEEgldpUFeSVIcd3QWEgRxBItTYVBXl5yPF9UBjIEQRSsU01QV4acvwQFAZyBIFUbVNJkBeHHD8GhYEcQSCV21QR5IUhx09BYSBHEEj1NhUEeX7I8XNQGMgRBLJCG3VBnhty/BIUBnIEgazSRlmQZ4ccvwaFgRxBICu1URXkmSHHb0FhIEcQyGptFAV5esjxe1AYyBEEsmIbNUGeGnL8ERQGcgSBrNpGSZAnhxx/BoWBHEEgK7dREeSJIcdfQWEgRxDI6m0UBHl8yPF3UBjIEQSyQ5vVBXlsyPFPUBgKcmwy6fa66+LAZ1YcemVBHh1y/BsETkGOzagdBdnIsZFkudeqgpwbckQBU5GjqyA8QRybvvml9Y0osy8lORBkNu3g+lWfIJfHnJVETY6ugvARa0JsrySKcnQVhI9YE4JsSq9XElU5EGRyUaLLV/+IdXTeXSVRlqOrIHzECjL7WpKoy4EgQYsS1UbpCXKtP9wryIEgUZsd1EdRkOP+JqkiB4IELXZUG1VBjkpSSQ4EidrsoD7KglyW5GwQi1Xa8FWTVZIY3/u5sNB9uArfxVpqB9SfIEvBDLoMT5AgkBFtECSCYmyPXb72vU2i4z4RKEjHt3lj94huEMgnwBMknzEnCBNAEOHwuHo+AQTJZ8wJwgQQRDg8rp5PAEHyGXOCMAEEEQ6Pq+cTQJB8xpwgTABBhMPj6vkEECSfMScIE0AQ4fC4ej4BBMlnzAnCBBBEODyunk8AQfIZc4IwAQQRDo+r5xNAkHzGnCBMAEGEw+Pq+QQQJJ8xJwgTQBDh8Lh6PgEEyWfMCcIEEEQ4PK6eTwBB8hlzgjABBBEOj6vnE0CQfMacIEwAQYTD4+r5BBAknzEnCBNAEOHwuHo+AQTJZ8wJwgQQRDg8rp5PAEHyGXOCMAEEEQ6Pq+cTQJB8xpwgTABBhMPj6vkEECSfMScIE9gIwgsCEDiBAIKwGhDYQgBBWA8IIAg7AAEfAZ4gPm5UNSGAIE2CZkwfAQTxcaOqCQEEaRI0Y/oIIIiPG1VNCCBIk6AZ00cAQXzcqGpCAEGaBM2YPgII4uNGVRMCCNIkaMb0EUAQHzeqmhBAkCZBM6aPAIL4uFHVhACCNAmaMX0EEMTHjaomBBCkSdCM6SOAID5uVDUhgCBNgmZMHwEE8XGjqgkBBGkSNGP6CCCIjxtVTQj8B1C6ZEICxVr9AAAAAElFTkSuQmCC";const g=e=>((0,c.dD)("data-v-74e69f79"),e=e(),(0,c.Cn)(),e),f={class:"golbal"},w={class:"setting"},y={key:0,class:"kk-flex bar"},h=["alt"],k=g((()=>(0,c._)("div",{class:"ellipsis no-select",style:{"font-size":"14px"}},[(0,c._)("span",null,"kk Terminal")],-1))),_=g((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),b={class:"kk-flex"},C={key:0,style:{"margin-left":"10px",cursor:"pointer"}},x={key:1,style:{"margin-left":"10px",cursor:"pointer"}},S={key:2,class:"kk-flex",style:{"margin-left":"10px"}},I=g((()=>(0,c._)("div",{style:{"font-size":"12px",color:"#313131","user-select":"none"}}," TCode ",-1))),D=g((()=>(0,c._)("div",{style:{"margin-left":"7px"}},null,-1))),T={style:{cursor:"pointer","margin-left":"5px"}},z={key:0,style:{"font-size":"12px",color:"#313131"}},W={style:{"user-select":"none","font-size":"14px","font-weight":"bold"}},E={style:{"user-select":"none","margin-top":"5px"}},V={style:{"user-select":"none","margin-top":"5px"}},F=g((()=>(0,c._)("span",{style:{"background-color":"#f3f4f4","user-select":"text"}},"/H",-1))),U={style:{"user-select":"none","margin-top":"5px"}},H=g((()=>(0,c._)("span",{style:{"background-color":"#f3f4f4","user-select":"text"}},"/A",-1))),A=g((()=>(0,c._)("div",{style:{"margin-left":"20px"}},null,-1))),R={ref:"terminal",class:"terminal-class"};function O(e,l,t,o,a,i){const s=(0,c.up)("VideoPlay"),n=(0,c.up)("el-icon"),r=(0,c.up)("el-tag"),u=(0,c.up)("VideoPause"),p=(0,c.up)("MostlyCloudy"),g=(0,c.up)("el-input"),O=(0,c.up)("QuestionFilled"),B=(0,c.up)("el-popover"),N=(0,c.up)("ConnectSetting"),j=(0,c.up)("StyleSetting"),K=(0,c.up)("FileBlock"),M=(0,c.up)("UserTcode"),$=(0,c.up)("HelpTcode");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c._)("div",f,[(0,c.wy)((0,c._)("div",w,[(0,c._)("div",{class:"setting-menu no-select",onClick:l[0]||(l[0]=e=>o.doSettings(1))},[(0,c._)("div",null,(0,m.zw)(e.$t("连接设置")),1)]),(0,c._)("div",{class:"setting-menu no-select",onClick:l[1]||(l[1]=e=>o.doSettings(2))},[(0,c._)("div",null,(0,m.zw)(e.$t("偏好设置")),1)]),(0,c._)("div",{class:"setting-menu no-select",onClick:l[2]||(l[2]=e=>o.doSettings(4))},[(0,c._)("div",null,(0,m.zw)(e.$t("文件管理")),1)]),(0,c._)("div",{class:"setting-menu no-select",onClick:l[3]||(l[3]=e=>o.doSettings(3))},[(0,c._)("div",null,(0,m.zw)(e.$t("重启")),1)])],512),[[d.F8,o.isShowSetting&&"headless"!=o.urlParams.mode&&"pure"!=o.urlParams.mode]]),"headless"!=o.urlParams.mode?((0,c.wg)(),(0,c.iD)("div",y,[(0,c._)("div",{style:{"user-select":"none"},onClick:l[4]||(l[4]=(...e)=>o.showSettings&&o.showSettings(...e))},[(0,c._)("img",{src:v,alt:e.$t("终端"),style:{height:"16px",margin:"0 7px",cursor:"pointer"}},null,8,h)]),k,_,(0,c.wy)((0,c._)("div",b,[o.env.cloud?((0,c.wg)(),(0,c.iD)("div",C,[0==o.recording?((0,c.wg)(),(0,c.j4)(r,{key:0,onClick:o.startRecord,size:"small",type:"info",effect:"plain",class:"kk-flex no-select",style:{color:"#313131"}},{default:(0,c.w5)((()=>[(0,c.Wm)(n,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(s)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("开始录制")),1)])),_:1},8,["onClick"])):((0,c.wg)(),(0,c.j4)(r,{key:1,size:"small",onClick:o.stopRecord,type:"danger",effect:"plain",class:"kk-flex no-select"},{default:(0,c.w5)((()=>[(0,c.Wm)(n,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(u)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("录制中")),1)])),_:1},8,["onClick"]))])):(0,c.kq)("",!0),o.env.cloud?((0,c.wg)(),(0,c.iD)("div",x,[(0,c.Wm)(r,{onClick:o.cloudSync,size:"small",type:"info",effect:"plain",class:"kk-flex no-select",style:{color:"#313131"}},{default:(0,c.w5)((()=>[(0,c.Wm)(n,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(p)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("云端同步")),1)])),_:1},8,["onClick"])])):(0,c.kq)("",!0),o.env.tCode?((0,c.wg)(),(0,c.iD)("div",S,[I,D,(0,c._)("div",null,[(0,c.Wm)(g,{modelValue:o.tcode,"onUpdate:modelValue":l[5]||(l[5]=e=>o.tcode=e),id:"kkterminalTcode",ref:"tCodeInputRef",style:{width:"100px",height:"20px",fontSize:"12px"},onKeydown:(0,d.D2)(o.handleTcode,["enter"]),maxlength:"6"},null,8,["modelValue","onKeydown"])]),(0,c._)("div",T,[o.env.tCode?((0,c.wg)(),(0,c.j4)(B,{key:0,placement:"bottom-end",width:e.$t("220"),trigger:"click"},{reference:(0,c.w5)((()=>[(0,c.Wm)(n,{style:{color:"#606266"}},{default:(0,c.w5)((()=>[(0,c.Wm)(O)])),_:1})])),default:(0,c.w5)((()=>[o.env.tCode?((0,c.wg)(),(0,c.iD)("div",z,[(0,c._)("div",W,(0,m.zw)(e.$t("什么是 TCode (终端代码) ？")),1),(0,c._)("div",E,(0,m.zw)(e.$t("TCode（终端代码）是用于访问和执行特定操作流程的快捷方式")),1),(0,c._)("div",V,[(0,c.Uk)((0,m.zw)(e.$t("输入"))+" ",1),F,(0,c.Uk)(" "+(0,m.zw)(e.$t("并按下回车，查看帮助信息")),1)]),(0,c._)("div",U,[(0,c.Uk)((0,m.zw)(e.$t("输入"))+" ",1),H,(0,c.Uk)(" "+(0,m.zw)(e.$t("并按下回车，自定义TCode")),1)])])):(0,c.kq)("",!0)])),_:1},8,["width"])):(0,c.kq)("",!0)]),A])):(0,c.kq)("",!0)],512),[[d.F8,"headless"!=o.urlParams.mode&&"pure"!=o.urlParams.mode]])])):(0,c.kq)("",!0),(0,c._)("div",R,null,512)]),(0,c.Wm)(N,{ref:"connectSettingRef",env:o.env,sshOptions:o.options,onSaveOp:o.saveOp,onDeleteOp:o.deleteOp,onCallback:o.saveEnv},null,8,["env","sshOptions","onSaveOp","onDeleteOp","onCallback"]),(0,c.Wm)(j,{ref:"styleSettingRef",env:o.env,onCallback:o.saveEnv,os:o.osInfo.clientOS},null,8,["env","onCallback","os"]),(0,c.Wm)(K,{ref:"fileBlockRef",sshKey:o.sshKey,os:o.osInfo.clientOS},null,8,["sshKey","os"]),(0,c.Wm)(M,{ref:"userTcodeRef",onImportTCodes:o.importTCodes,onExportTcodes:o.exportTcodes},null,8,["onImportTCodes","onExportTcodes"]),(0,c.Wm)($,{ref:"helpTcodeRef",userTCodes:o.tcodes,onHandleSaveTCode:o.handleSaveTCode,onHandleDeleteTCode:o.handleDeleteTCode},null,8,["userTCodes","onHandleSaveTCode","onHandleDeleteTCode"])],64)}t(7658),t(6229),t(7330),t(2062);var B=t(7071),N=t(4870),j=t(5595),K=t(6537),M=t(7114);const $={server_ip:"",server_port:22,server_user:"root",server_password:"",server_key:null,authType:0,option:"",lang:"en",bg:"#0c0c0c",fg:"#cccccc",fontFamily:"Courier New",fontSize:16,cursorStyle:"block",cursorBlink:!0,tCode:!0,cloud:!0};let P=window.location.protocol,L="";L="https:"==P?"wss://":"ws://";const Q=L+window.location.host+"/socket/ssh/",q=P+"//"+window.location.host+"/api",J=e=>{let l="";for(let t=0;t<e.length;t++)"/"!=e[t]?l+=e[t]:l+="@";return l},G=e=>{let l="";for(let t=0;t<e.length;t++)"@"!=e[t]?l+=e[t]:l+="-";return l},Z=e=>{const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let o=0;o<e;o++){const e=Math.floor(Math.random()*l.length);t+=l[e]}return t},Y=/[ !"#$&'()*,:;<=>?@[\\\]^`{}~]/g,X=e=>e.replace(Y,(function(e){return"\\"+e})),ee=e=>X(e),le=e=>((0,c.dD)("data-v-7537a1d1"),e=e(),(0,c.Cn)(),e),te=le((()=>(0,c._)("div",{style:{"margin-top":"-25px"}},null,-1))),oe={class:"item-class",style:{"margin-bottom":"15px"}},ae={class:"no-select form-width nowrap"},ie=le((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),se={class:"item-class",style:{"margin-bottom":"15px"}},ne={class:"no-select form-width"},re={class:"item-class",style:{"margin-bottom":"15px"}},ue={class:"no-select form-width"},de={class:"item-class",style:{"margin-bottom":"15px"}},ce={class:"no-select form-width"},pe={class:"item-class",style:{"margin-bottom":"5px"}},me={key:0,class:"item-class"},ve={key:1},ge={class:"errInfo no-select"},fe=le((()=>(0,c._)("div",{style:{"margin-bottom":"5px"}},null,-1))),we={style:{display:"flex","border-top":"1px solid #f1f2f4"}},ye=le((()=>(0,c._)("div",{style:{flex:"1"}},null,-1)));function he(e,l,t,o,a,i){const s=(0,c.up)("ToolTip"),n=(0,c.up)("Switch"),r=(0,c.up)("el-icon"),u=(0,c.up)("el-button"),d=(0,c.up)("Finished"),p=(0,c.up)("Edit"),v=(0,c.up)("HomeFilled"),g=(0,c.up)("el-input"),f=(0,c.up)("DocumentCopy"),w=(0,c.up)("Paperclip"),y=(0,c.up)("User"),h=(0,c.up)("arrow-down"),k=(0,c.up)("el-dropdown-item"),_=(0,c.up)("el-dropdown-menu"),b=(0,c.up)("el-dropdown"),C=(0,c.up)("Lock"),x=(0,c.up)("View"),S=(0,c.up)("Hide"),I=(0,c.up)("Key"),D=(0,c.up)("el-checkbox"),T=(0,c.up)("el-dialog"),z=(0,c.up)("OptionBlock"),W=(0,c.up)("PrivateKey");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.Wm)(T,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[14]||(l[14]=e=>o.DialogVisilble=e),"destory-on-close":!0,"before-close":o.closeDialog,width:360,title:e.$t("连接设置"),modal:!1,"close-on-click-modal":!1,"modal-class":"kk-dialog-class","align-center":"",draggable:""},{default:(0,c.w5)((()=>[te,(0,c._)("div",null,[(0,c._)("div",oe,[(0,c._)("div",ae,(0,m.zw)(e.$t("配   置"))+"：",1),(0,c.Wm)(s,{content:o.setInfo.option&&o.setInfo.option.length>0?o.setInfo.option:e.$t("新建配置")},{content:(0,c.w5)((()=>[(0,c._)("div",{class:(0,m.C_)(["ellipsis",o.setInfo.option&&o.setInfo.option.length>0?"old-option":"new-option"]),style:{"user-select":"none"}},(0,m.zw)(o.setInfo.option&&o.setInfo.option.length>0?o.setInfo.option:e.$t("新建配置")),3)])),_:1},8,["content"]),ie,(0,c._)("div",null,[(0,c.Wm)(u,{size:"small",type:"primary",onClick:l[0]||(l[0]=e=>o.showOption(0)),style:{"margin-left":"10px"}},{default:(0,c.w5)((()=>[(0,c.Wm)(r,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("切换")),1)])),_:1})]),(0,c._)("div",null,[0==o.isForbidInput?((0,c.wg)(),(0,c.j4)(u,{key:0,size:"small",type:"primary",onClick:l[1]||(l[1]=e=>o.showOption(1)),style:{"margin-left":"10px"}},{default:(0,c.w5)((()=>[(0,c.Wm)(r,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(d)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("保存")),1)])),_:1})):(0,c.kq)("",!0)]),(0,c._)("div",null,[1==o.isForbidInput?((0,c.wg)(),(0,c.j4)(u,{key:0,size:"small",type:"primary",onClick:o.newOp,style:{"margin-left":"10px"}},{default:(0,c.w5)((()=>[(0,c.Wm)(r,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(p)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("新建")),1)])),_:1},8,["onClick"])):(0,c.kq)("",!0)])]),(0,c._)("div",se,[(0,c._)("div",ne,(0,m.zw)(e.$t("主机IP"))+"：",1),(0,c._)("div",null,[(0,c.Wm)(g,{disabled:o.isForbidInput,modelValue:o.setInfo.server_ip,"onUpdate:modelValue":l[2]||(l[2]=e=>o.setInfo.server_ip=e),class:"w-50 m-2",placeholder:e.$t("输入主机IP")},{prefix:(0,c.w5)((()=>[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(v)])),_:1})])),_:1},8,["disabled","modelValue","placeholder"])]),(0,c._)("div",{style:{cursor:"pointer","margin-left":"10px"},onClick:l[3]||(l[3]=e=>o.doCopy(o.setInfo.server_ip))},[(0,c.Wm)(r,{size:"15"},{default:(0,c.w5)((()=>[(0,c.Wm)(f)])),_:1})])]),(0,c._)("div",re,[(0,c._)("div",ue,(0,m.zw)(e.$t("端口号"))+"：",1),(0,c._)("div",null,[(0,c.Wm)(g,{disabled:o.isForbidInput,modelValue:o.setInfo.server_port,"onUpdate:modelValue":l[4]||(l[4]=e=>o.setInfo.server_port=e),class:"w-50 m-2",placeholder:e.$t("输入端口号")},{prefix:(0,c.w5)((()=>[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(w)])),_:1})])),_:1},8,["disabled","modelValue","placeholder"])]),(0,c._)("div",{style:{cursor:"pointer","margin-left":"10px"},onClick:l[5]||(l[5]=e=>o.doCopy(o.setInfo.server_port))},[(0,c.Wm)(r,{size:"15"},{default:(0,c.w5)((()=>[(0,c.Wm)(f)])),_:1})])]),(0,c._)("div",de,[(0,c._)("div",ce,(0,m.zw)(e.$t("用户名"))+"：",1),(0,c._)("div",null,[(0,c.Wm)(g,{disabled:o.isForbidInput,modelValue:o.setInfo.server_user,"onUpdate:modelValue":l[6]||(l[6]=e=>o.setInfo.server_user=e),class:"w-50 m-2",placeholder:e.$t("输入用户名")},{prefix:(0,c.w5)((()=>[(0,c.Wm)(r,{class:"el-input__icon"},{default:(0,c.w5)((()=>[(0,c.Wm)(y)])),_:1})])),_:1},8,["disabled","modelValue","placeholder"])]),(0,c._)("div",{style:{cursor:"pointer","margin-left":"10px"},onClick:l[7]||(l[7]=e=>o.doCopy(o.setInfo.server_user))},[(0,c.Wm)(r,{size:"15"},{default:(0,c.w5)((()=>[(0,c.Wm)(f)])),_:1})])]),(0,c._)("div",pe,[(0,c.Wm)(b,{disabled:o.isForbidInput,class:"no-select form-width","hide-timeout":"300"},{dropdown:(0,c.w5)((()=>[(0,c.Wm)(_,null,{default:(0,c.w5)((()=>[(0,c.Wm)(k,{class:"no-select",onClick:l[8]||(l[8]=e=>o.setInfo.authType=0)},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("密码")),1)])),_:1}),(0,c.Wm)(k,{class:"no-select",onClick:l[9]||(l[9]=e=>o.setInfo.authType=1)},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("私钥")),1)])),_:1})])),_:1})])),default:(0,c.w5)((()=>[(0,c._)("span",null,[(0,c.Uk)((0,m.zw)(0==o.setInfo.authType?e.$t("密码"):e.$t("私钥")),1),(0,c.Wm)(r,{class:"el-icon--right"},{default:(0,c.w5)((()=>[(0,c.Wm)(h,{style:{cursor:"pointer"}})])),_:1})])])),_:1},8,["disabled"]),0==o.setInfo.authType?((0,c.wg)(),(0,c.iD)("div",me,[(0,c._)("div",null,[(0,c.Wm)(g,{disabled:o.isForbidInput,modelValue:o.setInfo.server_password,"onUpdate:modelValue":l[10]||(l[10]=e=>o.setInfo.server_password=e),type:o.isShowPassword?"text":"password",class:"w-50 m-2",placeholder:e.$t("输入密码")},{prefix:(0,c.w5)((()=>[(0,c.Wm)(r,{class:"el-input__icon"},{default:(0,c.w5)((()=>[(0,c.Wm)(C)])),_:1})])),_:1},8,["disabled","modelValue","type","placeholder"])]),1==o.isShowPassword?((0,c.wg)(),(0,c.iD)("div",{key:0,style:{cursor:"pointer","margin-left":"10px"},onClick:l[11]||(l[11]=e=>o.isShowPassword=!1)},[(0,c.Wm)(r,{size:"15"},{default:(0,c.w5)((()=>[(0,c.Wm)(x)])),_:1})])):((0,c.wg)(),(0,c.iD)("div",{key:1,style:{cursor:"pointer","margin-left":"10px"},onClick:l[12]||(l[12]=e=>o.isShowPassword=!0)},[(0,c.Wm)(r,{size:"15"},{default:(0,c.w5)((()=>[(0,c.Wm)(S)])),_:1})]))])):((0,c.wg)(),(0,c.iD)("div",ve,[(0,c.Wm)(u,{disabled:o.isForbidInput,type:"primary",onClick:o.openprivateKeyBlock},{default:(0,c.w5)((()=>[(0,c.Wm)(r,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(I)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("导入")),1)])),_:1},8,["disabled","onClick"])]))])]),(0,c._)("div",ge,(0,m.zw)(o.err_msg),1),fe,(0,c._)("div",we,[o.setInfo.option&&o.setInfo.option.length>0?((0,c.wg)(),(0,c.j4)(D,{key:0,modelValue:o.isNewWindow,"onUpdate:modelValue":l[13]||(l[13]=e=>o.isNewWindow=e),label:e.$t("新窗口打开"),size:"small",style:{"margin-bottom":"-15px","margin-top":"10px"}},null,8,["modelValue","label"])):(0,c.kq)("",!0),ye,(0,c.Wm)(u,{size:"small",type:"primary",onClick:o.confirm,style:{"margin-bottom":"-15px","margin-top":"10px"}},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close","title"]),(0,c.Wm)(z,{ref:"optionBlockRef",onCallback:o.doOption,opType:o.optionBlockType,sshOptions:t.sshOptions,onHandleDeleteOption:o.handleDeleteOption},null,8,["onCallback","opType","sshOptions","onHandleDeleteOption"]),(0,c.Wm)(W,{ref:"privateKeyRef",onCallback:o.savePrivateKey},null,8,["onCallback"])],64)}const ke=e=>((0,c.dD)("data-v-b81572ee"),e=e(),(0,c.Cn)(),e),_e=ke((()=>(0,c._)("div",{style:{"margin-top":"-27px"}},null,-1))),be={class:"no-select"},Ce={key:0,class:"kk-border"},xe=["onClick"],Se={class:"ellipsis",style:{margin:"0 10px"}},Ie=ke((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),De=["onClick"],Te={key:1,class:"kk-border"},ze={class:"kk-flex"},We={style:{flex:"1"}},Ee={style:{"margin-left":"10px"}},Ve=ke((()=>(0,c._)("div",{style:{"margin-top":"-15px"}},null,-1)));function Fe(e,l,t,o,a,i){const s=(0,c.up)("FileIcons"),n=(0,c.up)("CircleClose"),r=(0,c.up)("el-icon"),u=(0,c.up)("NoData"),p=(0,c.up)("el-input"),v=(0,c.up)("el-button"),g=(0,c.up)("el-dialog");return(0,c.wg)(),(0,c.j4)(g,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[1]||(l[1]=e=>o.DialogVisilble=e),"before-close":o.closeDialog,"destroy-on-close":"",width:420,modal:!1,title:e.$t("全部配置"),"modal-class":"kk-dialog-class",draggable:""},{default:(0,c.w5)((()=>[_e,(0,c._)("div",be,[Object.keys(t.sshOptions).length>0?((0,c.wg)(),(0,c.iD)("div",Ce,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(t.sshOptions,((e,l)=>((0,c.wg)(),(0,c.iD)("div",{key:l},[(0,c._)("div",{class:(0,m.C_)(["item-class",o.aimOption==l?"item-selected":""]),onClick:e=>o.aimOption=l},[(0,c.Wm)(s,{style:{display:"flex",alignItems:"center"},name:"kk.txt",width:20,height:20,isFolder:!1}),(0,c._)("div",Se,(0,m.zw)(l),1),Ie,(0,c._)("div",{onClick:e=>o.confirmDeleteOption(l)},[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})],8,De)],10,xe)])))),128))])):((0,c.wg)(),(0,c.iD)("div",Te,[(0,c.Wm)(u,{msg:o.noDataMsg},null,8,["msg"])])),(0,c._)("div",ze,[(0,c._)("div",null,(0,m.zw)(e.$t("配置名"))+"：",1),(0,c._)("div",We,[(0,c.Wm)(p,{size:"small",modelValue:o.aimOption,"onUpdate:modelValue":l[0]||(l[0]=e=>o.aimOption=e),disabled:0==t.opType,onKeydown:(0,d.D2)(o.confirm,["enter"]),class:"w-50 m-2",placeholder:""},null,8,["modelValue","disabled","onKeydown"])]),(0,c._)("div",Ee,[(0,c.Wm)(v,{size:"small",type:"primary",onClick:o.confirm},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(t.opType?e.$t("保存"):e.$t("选择")),1)])),_:1},8,["onClick"])])])]),Ve])),_:1},8,["modelValue","before-close","title"])}var Ue=t(2748),He=t(9957),Ae=t(152),Re=JSON.parse('{"220":"260","360":"380","描   述":"Desc","配   置":"Option","密码":"Pwd","私钥":"Key","导入私钥":"Import Key","请输入私钥密码":"Input Key Passphrase","内容过长":"Content too long","读取成功":"Read Success","读取失败":"Read Failed","文件加载失败":"File loading failed","帮助":"Help","功能TCode":"Function TCode","以":"Start with","开头，用于快速执行通用功能":", used to quickly execute common functions","系统TCode":"System TCode","开头，用于快速访问系统模块":", used for quick access to system modules","用户TCode":"User TCode","编辑":"Edit","删除":"Delete","只读":"Read Only","保存修改":"Save Changes","开头，自定义实现类似Shell脚本的自动化Workflow":", customizing Workflow for auto scripts","修改成功":"Modified","删除成功":"Deleted","提示":"Tips","确定删除此TCode吗?":"Sure to delete this TCode?","自定义TCode":"Customize TCode","新建窗口":"New Window","关闭窗口":"Close Window","退出登录":"Logout","刷新页面":"Refresh Webpage","连接设置":"Connect","偏好设置":"Style","文件管理":"File","重启":"Restart","输入TCode":"Input TCode","输入TCode描述":"Input Description","导入":"Import","导出":"Export","默认模板":"Default Template","清空":"Clear","保存":"Save","取消":"cancel","确定":"confirm","保存成功":"Saved","：名称非法":": illegal name","导入成功":"Imported","导入失败：无合法TCode":"Failed: no legal TCode","导入成功：":"Imported: ","个":"","，导入失败：":", Failed: ","导入失败：json格式错误":"Failed: json format error","导入失败：文件读取失败":"Failed: file read failed","导出成功":"Exported","TCode不能为空":"TCode cannot be empty","TCode只能由字母和数字组成":"TCode can only consist of letters and numbers","添加成功":"Added","新建配置":"New Option","切换":"Switch","新建":"New","主机IP":"Host","输入主机IP":"Input Host IP","端口号":"Port","输入端口号":"Input SSH Port","用户名":"User","输入用户名":"Input User Name","输入密码":"Input Password","主机IP地址无效":"IP address is invalid","端口号无效":"Port number is invalid","用户名不能为空":"User name cannot be empty","密码不能为空":"Password cannot be empty","私钥不能为空":"PrivateKey cannot be empty","内容为空":"Empty","复制成功":"Copied","属性":"Attribute","位置":"path","包含":"contain","大小":"size","字节":"Bytes","修改时间":"mtime","访问时间":"atime","权限":"permissions","权限修改":"Permissions Edit","0 个文件，0 个文件夹":"0 files, 0 folders"," 个文件，":" files, "," 个文件夹":" folders","文件名不能为空":"File name cannot be empty","文件名不能含有":"File name cannot contain","URL上传":"URL Upload","请输入文件URL":"Input File URL","文件名":"Name","请输入文件名":"Input File Name","URL不能为空":"URL cannot be empty","文件":"File","文件夹":"Folder","暂无数据":"No Data","全部配置":"All Options","配置名":"Name","选择":"Select","暂无配置":"No Option","确定删除此配置吗?":"Sure to delete this Option?","其它":"Other","语言":"language","颜色":"Color","背景色":"background","前景色":"foreground","文本":"Text","字体":"font","字号":"size","光标":"Cursor","样式":"style","闪烁":"blink","功能":"Func","确定删除吗?":"Sure to delete?","年":"/","月":"/","日，":" ","终端":"terminal","什么是 TCode (终端代码) ？":"What\'s TCode (Terminal Code)?","TCode（终端代码）是用于访问和执行特定操作流程的快捷方式":"TCode (Terminal Code) is shortcut to access and execute specific action process","输入":"Input","并按下回车，查看帮助信息":"and Enter to show Help Module","并按下回车，自定义TCode":"and Enter to customize TCode","输入目录路径":"Input dir path","刷新":"Refresh","打开":"Open","复制路径":"Copy Path","解压":"Decompress","下载":"Download","重命名":"Rename","确定删除此文件吗?":"Sure to delete this File?","开始上传":"Start uploading","文件上传失败":"File upload failed","文件夹上传失败":"Folder upload failed","暂无文件":"No File","修改保存中":"Saving modification","文件后台保存中":"Saving file in the backend","读取":"Read","写入":"Write","执行":"Execute","所有者":"Owner","所属组":"Group","其他用户":"Others","应用到子目录和文件":"Apply to sub directories and files","TCode必须以 /,S,U 开头":"TCode must start with /,S,U","保存编码":"Save Encoding","模式":"Mode","缩进":"Indent","复制":"Copy","新窗口打开":"Open in new window","开始录制":"Start Record","录制中":"Recording","录像链接已复制":"Record Link Copied","云端":"cloud","云端同步":"Cloud Sync","云端文件过多":"Too many Cloud Files","云端同步失败":"Cloud Sync Failed","云端文件加载失败":"Cloud File loading failed","确定从云端覆盖本地数据吗?":"Sure to overwrite local data from Cloud?"}');const Oe=(0,Ae.o)({locale:"en",fallbackLocale:"zh",messages:{en:Re},missing:(e,l)=>l});var Be=Oe;const Ne=(e,l,t)=>He.T.alert(l||Be.global.t("确定删除吗?"),e||Be.global.t("提示"),{autofocus:!1,customStyle:"font-size: 13px; color: black; width: 260px; user-select: none;",cancelButtonText:Be.global.t("取消"),confirmButtonText:Be.global.t("确定"),showCancelButton:!0,showConfirmButton:!0,cancelButtonClass:"el-button is-text",confirmButtonClass:"el-button--danger",buttonSize:"small",icon:Ue.Ruj,type:"warning",callback:e=>{"confirm"===e&&t()}});var je=t.p+"img/no_data.ec5c928e.png";const Ke=e=>((0,c.dD)("data-v-139a934c"),e=e(),(0,c.Cn)(),e),Me=Ke((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),$e={style:{display:"flex","align-items":"center"}},Pe=["alt"],Le={class:"msg"},Qe=Ke((()=>(0,c._)("div",{style:{flex:"1"}},null,-1)));function qe(e,l,t,o,a,i){return(0,c.wg)(),(0,c.iD)("div",{class:"no-data",style:(0,m.j5)(o.viewStyle)},[Me,(0,c.WI)(e.$slots,"myslot",{},void 0,!0),(0,c._)("div",$e,[(0,c._)("div",null,[(0,c._)("img",{src:je,alt:e.$t("暂无数据"),style:{width:"120px"}},null,8,Pe)])]),(0,c._)("div",Le,(0,m.zw)(t.msg),1),Qe],4)}var Je={name:"NoData",components:{},props:{msg:{type:String,required:!1,default:Be.global.t("暂无数据")},width:{type:String,required:!1},height:{type:String,required:!1},minHeight:{type:String,required:!1}},setup(e){const l=(0,c.Fl)((()=>({width:e.width?e.width:"100%",height:e.height?e.height:"100%",minHeight:e.minHeight?e.minHeight:""})));return{viewStyle:l}}},Ge=t(89);const Ze=(0,Ge.Z)(Je,[["render",qe],["__scopeId","data-v-139a934c"]]);var Ye=Ze,Xe=t(3223),el=t.n(Xe),ll={name:"OptionBlock",components:{FileIcons:el(),NoData:Ye,CircleClose:Ue.K41},props:["opType","sshOptions"],setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(Be.global.t("暂无配置")),a=(0,N.iH)(""),i=()=>{""!=a.value&&""!=a.value.trim()&&(l.emit("callback",a.value.trim()),d())},s=(0,N.iH)(""),n=e=>{s.value=e,Ne(Be.global.t("提示"),Be.global.t("确定删除此配置吗?"),r)},r=()=>{l.emit("handleDeleteOption",s.value),(0,j.z8)({message:Be.global.t("删除成功"),type:"success",grouping:!0}),a.value==s.value&&(a.value="")},u=()=>{o.value=Be.global.t("暂无配置"),a.value="",s.value="",t.value=!1},d=e=>{setTimeout((()=>{u()}),400),t.value=!1,e&&e()};return{DialogVisilble:t,noDataMsg:o,aimOption:a,confirm:i,confirmDeleteOption:n,doDeleteOption:r,reset:u,closeDialog:d}}};const tl=(0,Ge.Z)(ll,[["render",Fe],["__scopeId","data-v-b81572ee"]]);var ol=tl;const al=e=>((0,c.dD)("data-v-1dbee2f6"),e=e(),(0,c.Cn)(),e),il=al((()=>(0,c._)("div",{style:{"margin-top":"-32px"}},null,-1))),sl={class:"no-select"},nl={class:"kk-flex"},rl={class:"form-width"},ul={key:0,class:"errInfo no-select"},dl={key:1,style:{height:"7px"}},cl={class:"kk-flex"},pl={class:"form-width"},ml={style:{flex:"1"}},vl={style:{"margin-left":"10px"}},gl=al((()=>(0,c._)("div",{style:{"margin-top":"-10px"}},null,-1)));function fl(e,l,t,o,a,i){const s=(0,c.up)("Lock"),n=(0,c.up)("el-icon"),r=(0,c.up)("el-button"),u=(0,c.up)("el-upload"),p=(0,c.up)("Key"),v=(0,c.up)("el-input"),g=(0,c.up)("el-dialog");return(0,c.wg)(),(0,c.j4)(g,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[1]||(l[1]=e=>o.DialogVisilble=e),"before-close":o.closeDialog,width:320,modal:!1,title:e.$t("导入私钥"),"modal-class":"kk-dialog-class",draggable:""},{default:(0,c.w5)((()=>[il,(0,c._)("div",sl,[(0,c._)("div",nl,[(0,c._)("div",rl,(0,m.zw)(e.$t("私钥"))+"：",1),(0,c.Wm)(u,{"show-file-list":!1,"with-credentials":!0,"http-request":o.readPrivateKeyContent,multiple:!1},{default:(0,c.w5)((()=>[(0,c.Wm)(r,{size:"small",type:"primary"},{default:(0,c.w5)((()=>[(0,c.Wm)(n,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(s)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("选择")),1)])),_:1})])),_:1},8,["http-request"])]),o.err_msg&&o.err_msg.length>0?((0,c.wg)(),(0,c.iD)("div",ul,(0,m.zw)(o.err_msg),1)):((0,c.wg)(),(0,c.iD)("div",dl)),(0,c._)("div",cl,[(0,c._)("div",pl,(0,m.zw)(e.$t("密码"))+"：",1),(0,c._)("div",ml,[(0,c.Wm)(v,{size:"small",modelValue:o.passphrase,"onUpdate:modelValue":l[0]||(l[0]=e=>o.passphrase=e),onKeydown:(0,d.D2)(o.confirm,["enter"]),class:"w-50 m-2",placeholder:e.$t("请输入私钥密码")},{prefix:(0,c.w5)((()=>[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(p)])),_:1})])),_:1},8,["modelValue","onKeydown","placeholder"])]),(0,c._)("div",vl,[(0,c.Wm)(r,{size:"small",type:"primary",onClick:o.confirm},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])]),gl])),_:1},8,["modelValue","before-close","title"])}var wl={name:"PrivateKey",components:{Lock:Ue.HEZ,Key:Ue.srI},setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(""),a=(0,N.iH)(""),i=(0,N.iH)(""),s=()=>{l.emit("callback",a.value,i.value),u()},n=e=>{const l=new FileReader;l.onload=()=>{l.result.length>1048576?(0,j.z8)({message:Be.global.t("内容过长"),type:"warning",grouping:!0}):(a.value=l.result,(0,j.z8)({message:Be.global.t("读取成功"),type:"success",grouping:!0}))},l.onerror=()=>{(0,j.z8)({message:Be.global.t("读取失败"),type:"error",grouping:!0})},l.readAsText(e.file)},r=()=>{o.value="",a.value="",i.value="",t.value=!1},u=e=>{setTimeout((()=>{r()}),400),t.value=!1,e&&e()};return{DialogVisilble:t,err_msg:o,content:a,passphrase:i,readPrivateKeyContent:n,confirm:s,closeDialog:u,reset:r}}};const yl=(0,Ge.Z)(wl,[["render",fl],["__scopeId","data-v-1dbee2f6"]]);var hl=yl;const kl={ref:"tooltipContent",class:"tooltip-content"};function _l(e,l,t,o,a,i){const s=(0,c.up)("el-tooltip");return(0,c.wg)(),(0,c.j4)(s,{"popper-class":"no-select",content:t.content,disabled:!(t.isShow&&o.isShowTooltip),"show-after":t.delay,placement:"top"},{default:(0,c.w5)((()=>[(0,c._)("div",kl,[(0,c.WI)(e.$slots,"content",{},void 0,!0)],512)])),_:3},8,["content","disabled","show-after"])}var bl={name:"ToolTip",props:{content:{type:String,required:!0,default:""},delay:{type:Number,required:!1,default:200},isShow:{type:Boolean,required:!1,default:!0}},setup(){const e=(0,N.iH)(null),l=(0,N.iH)(!1),t=()=>{setTimeout((()=>{e.value&&e.value.firstElementChild?l.value=e.value.firstElementChild.scrollWidth>e.value.firstElementChild.offsetWidth:l.value=!1}),1)};let o=null;const a=()=>{e.value&&(o=new ResizeObserver((()=>{t()})),o.observe(e.value))};return(0,c.bv)((()=>{t(),a()})),(0,c.Jd)((()=>{o&&e.value&&(o.unobserve(e.value),o.disconnect())})),{tooltipContent:e,isShowTooltip:l,checkOverflow:t}}};const Cl=(0,Ge.Z)(bl,[["render",_l],["__scopeId","data-v-7eeec75d"]]);var xl=Cl;const Sl=e=>{const l={},t=new URLSearchParams(new URL(e||window.location.href).search).entries();for(const[o,a]of t)l[o]=a;return l},Il=e=>{let l=e||window.location.href;return-1!=l.indexOf("?")&&(l=l.substring(0,l.indexOf("?"))),l};var Dl={name:"ConnectSetting",components:{ToolTip:xl,OptionBlock:ol,PrivateKey:hl,HomeFilled:Ue.Ozs,Paperclip:Ue.pkz,User:Ue.n5m,Lock:Ue.HEZ,DocumentCopy:Ue.IBc,View:Ue.G7x,Hide:Ue.caK,Edit:Ue.I8b,Finished:Ue.qWi,Switch:Ue.rsf,ArrowDown:Ue.K5e,Key:Ue.srI},props:["env","sshOptions"],setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(""),a=(0,N.iH)(!1),i=(0,N.iH)({server_ip:e.env.server_ip,server_port:e.env.server_port,server_user:e.env.server_user,server_password:e.env.server_password,server_key:e.env.server_key||null,authType:e.env.authType||0,option:e.env.option}),s=()=>{o.value="";const e=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;return e.test(i.value.server_ip)?isNaN(i.value.server_port)||i.value.server_port<0||i.value.server_port>65535?(o.value=Be.global.t("端口号无效"),!1):i.value.server_user&&""!=i.value.server_user?0!=i.value.authType||i.value.server_password&&""!=i.value.server_password?!!(1!=i.value.authType||i.value.server_key&&""!=i.value.server_key.content)||(o.value=Be.global.t("私钥不能为空"),!1):(o.value=Be.global.t("密码不能为空"),!1):(o.value=Be.global.t("用户名不能为空"),!1):(o.value=Be.global.t("主机IP地址无效"),!1)},n=(0,N.iH)(),r=(0,N.iH)(0),u=e=>{1==e&&0==s()||(r.value=e,n.value.aimOption="",n.value.DialogVisilble=!0)},d=(0,N.iH)(!1);""!=i.value.option&&(d.value=!0);const c=t=>{0==r.value?(e.sshOptions[t].authType||(i.value.authType=0),i.value={...i.value,...e.sshOptions[t]},d.value=!0):1==r.value&&(i.value.option=t,l.emit("saveOp",t,i.value),d.value=!0)},p=()=>{d.value=!1,i.value.option=""},m=e=>{l.emit("deleteOp",e),i.value.option&&i.value.option==e&&(i.value.option="",d.value=!1)},v=(0,N.iH)(),g=()=>{v.value.content=i.value.server_key?i.value.server_key.content:"",v.value.passphrase=i.value.server_key?i.value.server_key.passphrase:"",v.value.DialogVisilble=!0},f=(e,l)=>{i.value.server_key={content:e,passphrase:l}},w=()=>{0!=s()&&(a.value&&i.value.option&&i.value.option.length>0?window.open(Il()+"?option="+i.value.option,"_blank"):(l.emit("callback",i.value),b()))},{toClipboard:y}=(0,B.Z)(),h=async e=>{e+="",e&&e.length>0?(await y(e),(0,j.z8)({message:Be.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})):(0,j.z8)({message:Be.global.t("内容为空"),type:"warning",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})},k=(0,N.iH)(!1),_=()=>{o.value="",a.value=!1,k.value=!1,i.value={server_ip:e.env.server_ip,server_port:e.env.server_port,server_user:e.env.server_user,server_password:e.env.server_password,server_key:e.env.server_key||null,authType:e.env.authType||0,option:e.env.option},""!=i.value.option?d.value=!0:d.value=!1,t.value=!1},b=e=>{n.value&&n.value.DialogVisilble&&n.value.closeDialog(),v.value&&v.value.DialogVisilble&&v.value.closeDialog(),setTimeout((()=>{_()}),400),t.value=!1,e&&e()};return{setInfo:i,DialogVisilble:t,err_msg:o,isNewWindow:a,confirm:w,optionBlockRef:n,showOption:u,optionBlockType:r,doOption:c,isForbidInput:d,newOp:p,handleDeleteOption:m,reset:_,closeDialog:b,doCopy:h,isShowPassword:k,privateKeyRef:v,openprivateKeyBlock:g,savePrivateKey:f}}};const Tl=(0,Ge.Z)(Dl,[["render",he],["__scopeId","data-v-7537a1d1"]]);var zl=Tl;const Wl=e=>((0,c.dD)("data-v-50ac7b22"),e=e(),(0,c.Cn)(),e),El=Wl((()=>(0,c._)("div",{style:{"margin-top":"-27px"}},null,-1))),Vl={class:"no-select"},Fl={class:"item-class",style:{"margin-bottom":"13px"}},Ul={class:"form-width"},Hl={class:"item-class"},Al={style:{margin:"0 20px"}},Rl=Wl((()=>(0,c._)("div",{style:{width:"20px"}},null,-1))),Ol={class:"item-class"},Bl={style:{margin:"0 20px"}},Nl={class:"item-class",style:{"margin-bottom":"13px"}},jl={class:"form-width"},Kl={class:"item-class"},Ml={class:"a-link no-select"},$l={class:"item-class"},Pl={class:"a-link no-select"},Ll={class:"item-class",style:{"margin-bottom":"8px"}},Ql={class:"form-width"},ql={class:"item-class"},Jl={class:"a-link no-select"},Gl=Wl((()=>(0,c._)("div",{style:{width:"15px"}},null,-1))),Zl={class:"item-class"},Yl={style:{margin:"0 20px"}},Xl={class:"item-class",style:{"margin-bottom":"13px"}},et={class:"form-width"},lt={class:"item-class"},tt=Wl((()=>(0,c._)("div",null,"TCode",-1))),ot={style:{margin:"0 20px"}},at={class:"item-class"},it={style:{margin:"0 20px"}},st={class:"item-class",style:{"margin-bottom":"5px"}},nt={class:"form-width"},rt={class:"item-class"},ut={class:"a-link no-select"},dt=Wl((()=>(0,c._)("div",{style:{"margin-bottom":"5px"}},null,-1))),ct={style:{display:"flex","border-top":"1px solid #f1f2f4"}},pt=Wl((()=>(0,c._)("div",{style:{flex:"1"}},null,-1)));function mt(e,l,t,o,a,i){const s=(0,c.up)("el-color-picker"),n=(0,c.up)("arrow-down"),r=(0,c.up)("el-icon"),u=(0,c.up)("el-dropdown-item"),d=(0,c.up)("el-dropdown-menu"),p=(0,c.up)("el-dropdown"),v=(0,c.up)("el-switch"),g=(0,c.up)("el-button"),f=(0,c.up)("el-dialog");return(0,c.wg)(),(0,c.j4)(f,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[5]||(l[5]=e=>o.DialogVisilble=e),"destroy-on-close":"",width:426,title:e.$t("偏好设置"),modal:!1,"modal-class":"kk-dialog-class","before-close":o.closeDialog,draggable:""},{default:(0,c.w5)((()=>[El,(0,c._)("div",Vl,[(0,c._)("div",Fl,[(0,c._)("div",Ul,(0,m.zw)(e.$t("颜色"))+"：",1),(0,c._)("div",Hl,[(0,c._)("div",null,(0,m.zw)(e.$t("背景色")),1),(0,c._)("div",Al,[(0,c.Wm)(s,{modelValue:o.setInfo.bg,"onUpdate:modelValue":l[0]||(l[0]=e=>o.setInfo.bg=e)},null,8,["modelValue"])])]),Rl,(0,c._)("div",Ol,[(0,c._)("div",null,(0,m.zw)(e.$t("前景色")),1),(0,c._)("div",Bl,[(0,c.Wm)(s,{modelValue:o.setInfo.fg,"onUpdate:modelValue":l[1]||(l[1]=e=>o.setInfo.fg=e)},null,8,["modelValue"])])])]),(0,c._)("div",Nl,[(0,c._)("div",jl,(0,m.zw)(e.$t("文本"))+"：",1),(0,c._)("div",Kl,[(0,c._)("div",null,(0,m.zw)(e.$t("字体")),1),(0,c.Wm)(p,{style:{margin:"0 20px"},"hide-timeout":"300"},{dropdown:(0,c.w5)((()=>[(0,c.Wm)(d,null,{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.fontFamilyList,((e,l)=>((0,c.wg)(),(0,c.j4)(u,{key:l,class:"no-select",onClick:l=>o.setInfo.fontFamily=e},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,c.w5)((()=>[(0,c._)("span",Ml,[(0,c.Uk)((0,m.zw)(o.setInfo.fontFamily),1),(0,c.Wm)(r,{class:"el-icon--right"},{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})])])),_:1})]),(0,c._)("div",$l,[(0,c._)("div",null,(0,m.zw)(e.$t("字号")),1),(0,c.Wm)(p,{style:{margin:"0 20px"},"hide-timeout":"300"},{dropdown:(0,c.w5)((()=>[(0,c.Wm)(d,null,{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.fontSizeList,((e,l)=>((0,c.wg)(),(0,c.j4)(u,{key:l,class:"no-select",onClick:l=>o.setInfo.fontSize=e},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,c.w5)((()=>[(0,c._)("span",Pl,[(0,c.Uk)((0,m.zw)(o.setInfo.fontSize),1),(0,c.Wm)(r,{class:"el-icon--right"},{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})])])),_:1})])]),(0,c._)("div",Ll,[(0,c._)("div",Ql,(0,m.zw)(e.$t("光标"))+"：",1),(0,c._)("div",ql,[(0,c._)("div",null,(0,m.zw)(e.$t("样式")),1),(0,c.Wm)(p,{style:{margin:"0 20px"},"hide-timeout":"300"},{dropdown:(0,c.w5)((()=>[(0,c.Wm)(d,null,{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.cursorStyleList,((e,l)=>((0,c.wg)(),(0,c.j4)(u,{key:l,class:"no-select",onClick:l=>o.setInfo.cursorStyle=e},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,c.w5)((()=>[(0,c._)("span",Jl,[(0,c.Uk)((0,m.zw)(o.setInfo.cursorStyle),1),(0,c.Wm)(r,{class:"el-icon--right"},{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})])])),_:1})]),Gl,(0,c._)("div",Zl,[(0,c._)("div",null,(0,m.zw)(e.$t("闪烁")),1),(0,c._)("div",Yl,[(0,c.Wm)(v,{modelValue:o.setInfo.cursorBlink,"onUpdate:modelValue":l[2]||(l[2]=e=>o.setInfo.cursorBlink=e)},null,8,["modelValue"])])])]),(0,c._)("div",Xl,[(0,c._)("div",et,(0,m.zw)(e.$t("功能"))+"：",1),(0,c._)("div",lt,[tt,(0,c._)("div",ot,[(0,c.Wm)(v,{modelValue:o.setInfo.tCode,"onUpdate:modelValue":l[3]||(l[3]=e=>o.setInfo.tCode=e)},null,8,["modelValue"])])]),(0,c._)("div",at,[(0,c._)("div",null,(0,m.zw)(e.$t("云端")),1),(0,c._)("div",it,[(0,c.Wm)(v,{modelValue:o.setInfo.cloud,"onUpdate:modelValue":l[4]||(l[4]=e=>o.setInfo.cloud=e)},null,8,["modelValue"])])])]),(0,c._)("div",st,[(0,c._)("div",nt,(0,m.zw)(e.$t("其它"))+"：",1),(0,c._)("div",rt,[(0,c._)("div",null,(0,m.zw)(e.$t("语言")),1),(0,c.Wm)(p,{style:{margin:"0 20px"},"hide-timeout":"300"},{dropdown:(0,c.w5)((()=>[(0,c.Wm)(d,null,{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.langList,((e,l)=>((0,c.wg)(),(0,c.j4)(u,{key:l,class:"no-select",onClick:l=>o.setInfo.lang=e.value},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.label),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,c.w5)((()=>[(0,c._)("span",ut,[(0,c.Uk)((0,m.zw)(o.mapValueToLabel(o.setInfo.lang)),1),(0,c.Wm)(r,{class:"el-icon--right"},{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})])])),_:1})])])]),dt,(0,c._)("div",ct,[pt,(0,c.Wm)(g,{size:"small",type:"primary",onClick:o.confirm,style:{"margin-bottom":"-15px","margin-top":"10px"}},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])),_:1},8,["modelValue","title","before-close"])}var vt={name:"StyleSetting",components:{ArrowDown:Ue.K5e},props:["env","os"],setup(e,l){const t=(0,N.iH)(!1),o=[{label:"English",value:"en"},{label:"Chinese",value:"zh"}],a=e=>{const l=o.find((l=>l.value===e));return l?l.label:"English"},i=(0,c.Fl)((()=>"Windows"==e.os?["Courier New","Consolas","Monospace","Lucida Console"]:"Mac"==e.os||"iOS"==e.os?["Courier New","Menlo","Monaco","Courier"]:["Courier New","Consolas","Monospace","Lucida Console"])),s=[12,14,16,18,20],n=["block","underline","bar"],r=(0,N.iH)({lang:e.env.lang,bg:e.env.bg,fg:e.env.fg,fontFamily:e.env.fontFamily,fontSize:e.env.fontSize,cursorStyle:e.env.cursorStyle,cursorBlink:e.env.cursorBlink,tCode:e.env.tCode,cloud:e.env.cloud}),u=()=>{l.emit("callback",r.value),p()},d=()=>{r.value={lang:e.env.lang,bg:e.env.bg,fg:e.env.fg,fontFamily:e.env.fontFamily,fontSize:e.env.fontSize,cursorStyle:e.env.cursorStyle,cursorBlink:e.env.cursorBlink,tCode:e.env.tCode,cloud:e.env.cloud},t.value=!1},p=e=>{setTimeout((()=>{d()}),400),t.value=!1,e&&e()};return{langList:o,mapValueToLabel:a,fontFamilyList:i,fontSizeList:s,cursorStyleList:n,setInfo:r,DialogVisilble:t,confirm:u,closeDialog:p}}};const gt=(0,Ge.Z)(vt,[["render",mt],["__scopeId","data-v-50ac7b22"]]);var ft=gt;const wt=e=>((0,c.dD)("data-v-ecd907ba"),e=e(),(0,c.Cn)(),e),yt=wt((()=>(0,c._)("div",{style:{"margin-top":"-27px"}},null,-1))),ht={class:"title kk-flex"},kt={class:"ellipsis",style:{flex:"1"}},_t={key:0},bt=wt((()=>(0,c._)("div",null,"/",-1))),Ct=["onClick"],xt=wt((()=>(0,c._)("div",null,"/",-1))),St={class:"kk-flex"},It={key:1,class:"disabled-function",style:{"margin-left":"10px","font-size":"18px",cursor:"pointer"}},Dt={key:3,class:"disabled-function",style:{"margin-left":"10px","font-size":"18px",cursor:"pointer"}},Tt={key:4,class:"hover-class",style:{"margin-left":"10px","font-size":"18px",cursor:"pointer"}},zt={class:"hover-class",style:{"font-size":"18px",cursor:"pointer"}},Wt={class:"kk-flex"},Et={class:"kk-flex"},Vt={class:"kk-flex"},Ft=wt((()=>(0,c._)("div",null,"URL",-1))),Ut={key:5,class:"disabled-function",style:{"margin-left":"10px","font-size":"18px",cursor:"pointer"}},Ht={key:0},At=["onClick","onDblclick","onContextmenu"],Rt={key:0,style:{margin:"0 10px"}},Ot={key:0,class:"ellipsis",style:{margin:"0 10px"}},Bt=["onClick","onDblclick","onContextmenu"],Nt={key:0,style:{margin:"0 10px"}},jt={key:0,class:"ellipsis",style:{margin:"0 10px"}},Kt={key:1},Mt=wt((()=>(0,c._)("div",{style:{"margin-top":"-12px"}},null,-1)));function $t(e,l,t,o,a,i){const s=(0,c.up)("el-input"),n=(0,c.up)("Refresh"),r=(0,c.up)("el-icon"),u=(0,c.up)("Fold"),p=(0,c.up)("Download"),v=(0,c.up)("Upload"),g=(0,c.up)("DocumentAdd"),f=(0,c.up)("el-dropdown-item"),w=(0,c.up)("FolderAdd"),y=(0,c.up)("Link"),h=(0,c.up)("el-dropdown-menu"),k=(0,c.up)("el-dropdown"),_=(0,c.up)("FileIcons"),b=(0,c.up)("ToolTip"),C=(0,c.up)("NoData"),x=(0,c.up)("el-dialog"),S=(0,c.up)("el-button"),I=(0,c.up)("el-upload"),D=(0,c.up)("FileUrl"),T=(0,c.up)("TxtPreview"),z=(0,c.up)("MkFile"),W=(0,c.up)("FileAttr"),E=(0,c.up)("el-popconfirm"),V=(0,c.Q2)("loading");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.Wm)(x,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[32]||(l[32]=e=>o.DialogVisilble=e),"before-close":o.closeDialog,title:e.$t("文件管理"),width:"50%",modal:!1,"modal-class":"kk-dialog-class","align-center":"",draggable:"",style:{position:"relative"}},{default:(0,c.w5)((()=>[yt,(0,c._)("div",null,[(0,c._)("div",ht,[(0,c._)("div",kt,[1==o.isShowDirInput?((0,c.wg)(),(0,c.iD)("div",_t,[(0,c.Wm)(s,{id:"aimDirInput",modelValue:o.dir,"onUpdate:modelValue":l[0]||(l[0]=e=>o.dir=e),placeholder:e.$t("输入目录路径"),size:"small",onKeydown:l[1]||(l[1]=(0,d.D2)((e=>{o.isShowDirInput=!1}),["enter"])),onBlur:l[2]||(l[2]=e=>{o.isShowDirInput=!1}),onMousedown:l[3]||(l[3]=(0,d.iM)((()=>{}),["stop"])),onDblclick:l[4]||(l[4]=(0,d.iM)((()=>{}),["stop"])),onChange:o.dirInputCallback},null,8,["modelValue","placeholder","onChange"])])):((0,c.wg)(),(0,c.iD)("div",{key:1,class:"kk-flex no-select ellipsis",onDblclick:l[5]||(l[5]=(...e)=>o.doShowDirInput&&o.doShowDirInput(...e))},[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.dirLevels,((e,l)=>((0,c.wg)(),(0,c.iD)("div",{key:l,class:"kk-flex"},[bt,(0,c._)("div",{class:"dir-level",onClick:e=>o.changeDirByLevel(e,l)},(0,m.zw)(e),9,Ct)])))),128)),xt],32))]),(0,c._)("div",St,[(0,c._)("div",{class:"hover-class",onClick:l[6]||(l[6]=(...e)=>o.doRefresh&&o.doRefresh(...e)),style:{"margin-left":"10px","font-size":"18px",cursor:"pointer"}},[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})]),o.dir&&"/"!=o.dir?((0,c.wg)(),(0,c.iD)("div",{key:0,class:"hover-class",onClick:l[7]||(l[7]=(...e)=>o.doReturn&&o.doReturn(...e)),style:{"margin-left":"10px","font-size":"18px",cursor:"pointer"}},[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(u)])),_:1})])):((0,c.wg)(),(0,c.iD)("div",It,[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(u)])),_:1})])),1==o.selectedFiles.length?((0,c.wg)(),(0,c.iD)("div",{key:2,class:"hover-class",onClick:l[8]||(l[8]=(...e)=>o.doDownload&&o.doDownload(...e)),style:{"margin-left":"10px","font-size":"18px",cursor:"pointer"}},[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(p)])),_:1})])):((0,c.wg)(),(0,c.iD)("div",Dt,[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(p)])),_:1})])),0==o.dirStatus?((0,c.wg)(),(0,c.iD)("div",Tt,[(0,c.wy)((0,c.Wm)(k,{style:{"line-height":"unset"},placement:"bottom-end",size:"small",trigger:"click"},{dropdown:(0,c.w5)((()=>[(0,c.wy)((0,c.Wm)(h,{class:"no-select",style:{"text-align":"center"}},{default:(0,c.w5)((()=>[(0,c.Wm)(f,{onClick:l[9]||(l[9]=e=>o.fileUploadTypeChoose(0))},{default:(0,c.w5)((()=>[(0,c._)("div",Wt,[(0,c._)("div",null,[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(g)])),_:1})]),(0,c._)("div",null,(0,m.zw)(e.$t("文件")),1)])])),_:1}),(0,c.Wm)(f,{onClick:l[10]||(l[10]=e=>o.fileUploadTypeChoose(1))},{default:(0,c.w5)((()=>[(0,c._)("div",Et,[(0,c._)("div",null,[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(w)])),_:1})]),(0,c._)("div",null,(0,m.zw)(e.$t("文件夹")),1)])])),_:1}),(0,c.Wm)(f,{onClick:l[11]||(l[11]=e=>o.fileUploadTypeChoose(2))},{default:(0,c.w5)((()=>[(0,c._)("div",Vt,[(0,c._)("div",null,[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(y)])),_:1})]),Ft])])),_:1})])),_:1},512),[[d.F8,o.DialogVisilble]])])),default:(0,c.w5)((()=>[(0,c._)("div",zt,[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(v)])),_:1})])])),_:1},512),[[d.F8,o.DialogVisilble]])])):((0,c.wg)(),(0,c.iD)("div",Ut,[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(v)])),_:1})]))])]),(0,c.wy)(((0,c.wg)(),(0,c.iD)("div",{id:"fileArea",ref:"fileAreaRef","element-loading-text":"Loading...",class:"list-class no-select",onContextmenu:l[27]||(l[27]=(...e)=>o.handleContextMenu&&o.handleContextMenu(...e)),onScroll:l[28]||(l[28]=(...e)=>o.handleScroll&&o.handleScroll(...e)),onDragover:l[29]||(l[29]=(...e)=>o.preventDefault&&o.preventDefault(...e)),onDrop:l[30]||(l[30]=(...e)=>o.handleFileDrag&&o.handleFileDrag(...e)),tabindex:"0",onKeydown:l[31]||(l[31]=(...e)=>o.handleShortcutKeys&&o.handleShortcutKeys(...e))},[0!=o.files.length?((0,c.wg)(),(0,c.iD)("div",Ht,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.files,(e=>((0,c.wg)(),(0,c.iD)("div",{key:e.id},[1==e.isDirectory?((0,c.wg)(),(0,c.iD)("div",{key:0,class:(0,m.C_)([-1!=o.isSelected(e.id)?"item-selected":"","item-class"]),onClick:l=>o.addSelectFile(l,e),onDblclick:l=>o.changeDir(o.dir+e.name+"/"),onContextmenu:l=>o.addSelectFile(l,e,!1)},[(0,c.Wm)(_,{style:{display:"flex",alignItems:"center"},iconStyle:{opacity:"."==e.name[0]||-1!=o.isClipboard(e.id)&&o.isCtrlx?.5:1},name:e.name,width:20,height:20,isFolder:e.isDirectory,isLink:e.isSymlink},null,8,["iconStyle","name","isFolder","isLink"]),1==o.isShowRenameInput&&o.renameFile&&e.id==o.renameFile.id?((0,c.wg)(),(0,c.iD)("div",Rt,[(0,c.Wm)(s,{id:"rename",modelValue:o.renameFile.name,"onUpdate:modelValue":l[12]||(l[12]=e=>o.renameFile.name=e),placeholder:"",size:"small",onKeydown:[l[13]||(l[13]=(0,d.D2)((e=>{o.isShowRenameInput=!1}),["enter"])),l[15]||(l[15]=(0,d.iM)((()=>{}),["stop"]))],onBlur:l[14]||(l[14]=e=>{o.isShowRenameInput=!1}),onContextmenu:l[16]||(l[16]=(0,d.iM)((()=>{}),["stop"])),onMousedown:l[17]||(l[17]=(0,d.iM)((()=>{}),["stop"])),onDblclick:l[18]||(l[18]=(0,d.iM)((()=>{}),["stop"])),onChange:l=>o.handleRename(e)},null,8,["modelValue","onChange"])])):(0,c.kq)("",!0),(0,c.Wm)(b,{isShow:!o.isShowMenu,content:e.name,delay:1e3},{content:(0,c.w5)((()=>[1==o.isShowRenameInput&&o.renameFile&&e.id==o.renameFile.id?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("div",Ot,(0,m.zw)(e.name),1))])),_:2},1032,["isShow","content"])],42,At)):((0,c.wg)(),(0,c.iD)("div",{key:1,class:(0,m.C_)([-1!=o.isSelected(e.id)?"item-selected":"","item-class"]),onClick:l=>o.addSelectFile(l,e),onDblclick:l=>o.preViewFile(e.name),onContextmenu:l=>o.addSelectFile(l,e,!1)},[(0,c.Wm)(_,{style:{display:"flex",alignItems:"center"},iconStyle:{opacity:"."==e.name[0]||-1!=o.isClipboard(e.id)&&o.isCtrlx?.5:1},name:e.name,width:20,height:20,isFolder:e.isDirectory,isLink:e.isSymlink},null,8,["iconStyle","name","isFolder","isLink"]),1==o.isShowRenameInput&&o.renameFile&&e.id==o.renameFile.id?((0,c.wg)(),(0,c.iD)("div",Nt,[(0,c.Wm)(s,{id:"rename",modelValue:o.renameFile.name,"onUpdate:modelValue":l[19]||(l[19]=e=>o.renameFile.name=e),placeholder:"",size:"small",onKeydown:[l[20]||(l[20]=(0,d.D2)((e=>{o.isShowRenameInput=!1}),["enter"])),l[22]||(l[22]=(0,d.iM)((()=>{}),["stop"]))],onBlur:l[21]||(l[21]=e=>{o.isShowRenameInput=!1}),onContextmenu:l[23]||(l[23]=(0,d.iM)((()=>{}),["stop"])),onMousedown:l[24]||(l[24]=(0,d.iM)((()=>{}),["stop"])),onDblclick:l[25]||(l[25]=(0,d.iM)((()=>{}),["stop"])),onChange:l=>o.handleRename(e)},null,8,["modelValue","onChange"])])):(0,c.kq)("",!0),(0,c.Wm)(b,{isShow:!o.isShowMenu,content:e.name,delay:1e3},{content:(0,c.w5)((()=>[1==o.isShowRenameInput&&o.renameFile&&e.id==o.renameFile.id?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("div",jt,(0,m.zw)(e.name),1))])),_:2},1032,["isShow","content"])],42,Bt))])))),128))])):((0,c.wg)(),(0,c.iD)("div",Kt,[0==o.loading?((0,c.wg)(),(0,c.j4)(C,{key:0,height:"248px",onContextmenu:l[26]||(l[26]=e=>o.selectedFiles=[]),msg:o.noDataMsg},null,8,["msg"])):(0,c.kq)("",!0)]))],32)),[[V,o.loading]])]),Mt])),_:1},8,["modelValue","before-close","title"]),(0,c.wy)((0,c.Wm)(I,{"show-file-list":!1,"with-credentials":!0,"http-request":o.doUpload,multiple:!0},{default:(0,c.w5)((()=>[(0,c.wy)((0,c.Wm)(S,{size:"small",type:"primary",id:"fileUploadInputButton"},null,512),[[d.F8,!1]])])),_:1},8,["http-request"]),[[d.F8,!1]]),(0,c.wy)((0,c._)("input",{type:"file",webkitdirectory:"",onChange:l[33]||(l[33]=(...e)=>o.folderInputUploadPrehandle&&o.folderInputUploadPrehandle(...e)),id:"folderUploadInput"},null,544),[[d.F8,!1]]),(0,c.Wm)(D,{ref:"fileUrlRef",onCallback:o.fileUrlUpload},null,8,["onCallback"]),(0,c.Wm)(T,{ref:"txtPreviewRef",onDoSave:o.doSave},null,8,["onDoSave"]),(0,c.Wm)(z,{ref:"mkFileRef",onCallback:o.handleMkFile},null,8,["onCallback"]),(0,c.Wm)(W,{sshKey:t.sshKey,ref:"fileAttrRef",onCallback:o.doRename,onEditPermissions:o.editPermissions},null,8,["sshKey","onCallback","onEditPermissions"]),(0,c.wy)((0,c._)("div",{ref:"menuBlockRef",onContextmenu:l[43]||(l[43]=(...e)=>o.preventDefault&&o.preventDefault(...e)),class:"kk-menu no-select"},[(0,c._)("div",{style:{"border-bottom":"1px solid #ddd"},class:"kk-menu-item",onClick:l[34]||(l[34]=e=>o.handleMenuSelect(1)),key:"1"},(0,m.zw)(e.$t("刷新")),1),(0,c._)("div",{class:(0,m.C_)(["kk-menu-item",1!=o.selectedFiles.length?"disabled":""]),onClick:l[35]||(l[35]=e=>o.handleMenuSelect(2)),key:"2"},(0,m.zw)(e.$t("打开")),3),(0,c._)("div",{style:{"border-bottom":"1px solid #ddd"},class:(0,m.C_)(["kk-menu-item",o.selectedFiles.length>1?"disabled":""]),onClick:l[36]||(l[36]=e=>o.handleMenuSelect(3)),key:"3"},(0,m.zw)(e.$t("复制路径")),3),(0,c.wy)((0,c._)("div",{style:{"border-bottom":"1px solid #ddd"},class:(0,m.C_)(["kk-menu-item",1==o.selectedFiles.length&&o.isZipFile(o.selectedFiles[0].name)?"":"disabled"]),onClick:l[37]||(l[37]=e=>o.handleMenuSelect(9)),key:"9"},(0,m.zw)(e.$t("解压")),3),[[d.F8,1==o.selectedFiles.length&&o.isZipFile(o.selectedFiles[0].name)]]),(0,c._)("div",{class:(0,m.C_)(["kk-menu-item",1!=o.selectedFiles.length?"disabled":""]),onClick:l[38]||(l[38]=e=>o.handleMenuSelect(4)),key:"4"},(0,m.zw)(e.$t("下载")),3),(0,c._)("div",{class:(0,m.C_)(["kk-menu-item",1==o.dirStatus?"disabled":""]),onClick:l[39]||(l[39]=e=>o.handleMenuSelect(5)),key:"5"},(0,m.zw)(e.$t("新建")),3),(0,c._)("div",{class:(0,m.C_)(["kk-menu-item",1!=o.selectedFiles.length?"disabled":""]),onClick:l[40]||(l[40]=e=>o.handleMenuSelect(6)),key:"6"},(0,m.zw)(e.$t("重命名")),3),(0,c.Wm)(E,{title:e.$t("确定删除此文件吗?"),"confirm-button-text":e.$t("确定"),"cancel-button-text":e.$t("取消"),onConfirm:o.confirmPopConfirm,onCancel:o.cancelPopConfirm,visible:o.isShowMenu&&o.isShowPop,trigger:"click","popper-style":{zIndex:3466,fontSize:"13px",color:"black"},"popper-class":"confirmPop",placement:"right","confirm-button-type":"danger"},{reference:(0,c.w5)((()=>[(0,c._)("div",{class:(0,m.C_)(["kk-menu-item",0==o.selectedFiles.length?"disabled":""]),key:"7"},[(0,c._)("div",{onClick:l[41]||(l[41]=e=>o.handleMenuSelect(7))},(0,m.zw)(e.$t("删除")),1)],2)])),_:1},8,["title","confirm-button-text","cancel-button-text","onConfirm","onCancel","visible"]),(0,c._)("div",{style:{"border-top":"1px solid #ddd"},class:(0,m.C_)(["kk-menu-item",1!=o.selectedFiles.length?"disabled":""]),onClick:l[42]||(l[42]=e=>o.handleMenuSelect(8)),key:"8"},(0,m.zw)(e.$t("属性")),3)],544),[[d.F8,o.isShowMenu]])],64)}const Pt={tar:"tar",tbz2:"tbz2",gz:"gz",xz:"xz",bz2:"bz2",zip:"zip"},Lt=e=>{const l=e.lastIndexOf(".");if(-1==l)return!1;const t=e.substring(l+1).toLowerCase();return!!Pt[t]},Qt={pdf:"application/pdf",html:"text/html",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp",webp:"image/webp",svg:"image/svg+xml",ico:"image/vnd.microsoft.icon"},qt={mp3:"audio/mpeg",wav:"audio/wav",ogg:"audio/ogg",aac:"audio/aac",m4a:"audio/mp4"},Jt={mp4:"video/mp4",webm:"video/webm",ogv:"video/ogg",avi:"video/x-msvideo",mov:"video/quicktime"},Gt=e=>{const l={preview:"editor",type:"text"},t=e.lastIndexOf(".");if(-1==t)return l;const o=e.substring(t+1).toLowerCase();return Qt[o]?(l.preview="iframe",l.type=Qt[o]):qt[o]?(l.preview="audio",l.type=qt[o]):Jt[o]&&(l.preview="video",l.type=Jt[o]),l},Zt=(e,l)=>lo(e)+oo(l),Yt=e=>{const l=Zt("REGULAR",e).slice(1),t={owner:["r"===l[0],"w"===l[1],"x"===l[2]||"s"===l[2]||"S"===l[2]],group:["r"===l[3],"w"===l[4],"x"===l[5]||"s"===l[5]||"S"===l[5]],others:["r"===l[6],"w"===l[7],"x"===l[8]||"t"===l[8]||"T"===l[8]],sub:!1};return t},Xt=e=>{const l=e=>(e[0]?4:0)+(e[1]?2:0)+(e[2]?1:0),t=l(e.owner)+"",o=l(e.group)+"",a=l(e.others)+"";return t+o+a},eo={BLOCK_SPECIAL:"b",CHAR_SPECIAL:"c",FIFO_SPECIAL:"p",SOCKET_SPECIAL:"s",REGULAR:"-",DIRECTORY:"d",SYMLINK:"l",UNKNOWN:"?"},lo=e=>eo[e],to={USR_R:256,USR_W:128,USR_X:64,GRP_R:32,GRP_W:16,GRP_X:8,OTH_R:4,OTH_W:2,OTH_X:1,SUID:2048,SGID:1024,STICKY:512},oo=e=>{let l="---------",t=0;for(let o=0;o<e.length;o++)to[e[o]]&&(t+=to[e[o]]);return l=ao(l,0,t&to["USR_R"],"r"),l=ao(l,1,t&to["USR_W"],"w"),l=ao(l,2,t&to["USR_X"],"x",t&to["SUID"],"s","S"),l=ao(l,3,t&to["GRP_R"],"r"),l=ao(l,4,t&to["GRP_W"],"w"),l=ao(l,5,t&to["GRP_X"],"x",t&to["SGID"],"s","S"),l=ao(l,6,t&to["OTH_R"],"r"),l=ao(l,7,t&to["OTH_W"],"w"),l=ao(l,8,t&to["OTH_X"],"x",t&to["STICKY"],"t","T"),l},ao=(e,l,t,o,a=0,i="",s="-")=>(e=a?e.substring(0,l)+(t?i:s)+e.substring(l+1):e.substring(0,l)+(t?o:e[l])+e.substring(l+1),e),io=e=>((0,c.dD)("data-v-30d0e50e"),e=e(),(0,c.Cn)(),e),so={class:"kk-flex"},no={class:"ellipsis",style:{margin:"0 5px","font-size":"larger"}},ro=io((()=>(0,c._)("div",{style:{"margin-top":"-28px"}},null,-1))),uo={class:"kk-flex ellipsis",style:{"margin-bottom":"5px","overflow-x":"auto"}},co={class:"kk-flex"},po={class:"no-select"},mo={class:"a-link no-select"},vo=io((()=>(0,c._)("div",{style:{"margin-right":"20px"}},null,-1))),go={class:"kk-flex"},fo={class:"no-select"},wo={class:"a-link no-select"},yo=io((()=>(0,c._)("div",{style:{"margin-right":"20px"}},null,-1))),ho={class:"kk-flex"},ko={class:"no-select"},_o=io((()=>(0,c._)("div",{style:{"margin-right":"20px"}},null,-1))),bo={class:"kk-flex"},Co={"element-loading-text":"Loading...",style:{padding:"0px 5px",width:"100%",height:"60vh"}},xo=["src"],So={key:1,controls:"",class:"preview"},Io=["src","type"],Do={key:2,controls:"",class:"preview"},To=["src","type"],zo=io((()=>(0,c._)("div",{style:{"margin-top":"-13px"}},null,-1)));function Wo(e,l,t,o,a,i){const s=(0,c.up)("FileIcons"),n=(0,c.up)("arrow-down"),r=(0,c.up)("el-icon"),u=(0,c.up)("el-dropdown-item"),p=(0,c.up)("el-dropdown-menu"),v=(0,c.up)("el-dropdown"),g=(0,c.up)("el-input-number"),f=(0,c.up)("DocumentCopy"),w=(0,c.up)("el-button"),y=(0,c.up)("AceEditor"),h=(0,c.up)("el-dialog"),k=(0,c.Q2)("loading");return(0,c.wg)(),(0,c.j4)(h,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[1]||(l[1]=e=>o.DialogVisilble=e),width:"80%",modal:!1,"modal-class":"kk-dialog-class","before-close":o.closeDialog,"align-center":"",draggable:""},{title:(0,c.w5)((()=>[(0,c._)("div",so,[(0,c.Wm)(s,{style:{display:"flex",alignItems:"center"},name:o.fileName,width:25,height:25,isFolder:!1},null,8,["name"]),(0,c._)("div",no,(0,m.zw)(o.modifyTag+o.fileName),1)])])),default:(0,c.w5)((()=>[ro,(0,c.wy)((0,c._)("div",uo,[(0,c._)("div",co,[(0,c._)("div",po,(0,m.zw)(e.$t("保存编码"))+"：",1),(0,c.Wm)(v,{size:"small","hide-timeout":"300"},{dropdown:(0,c.w5)((()=>[(0,c.Wm)(p,null,{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.encodeSet,((e,l)=>((0,c.wg)(),(0,c.j4)(u,{key:l,class:"no-select",onClick:l=>{o.encode=e,o.modifyTag="*"}},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,c.w5)((()=>[(0,c._)("span",mo,[(0,c.Uk)((0,m.zw)(o.encode),1),(0,c.Wm)(r,{class:"el-icon--right"},{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})])])),_:1})]),vo,(0,c._)("div",go,[(0,c._)("div",fo,(0,m.zw)(e.$t("模式"))+"：",1),(0,c.Wm)(v,{size:"small","hide-timeout":"300"},{dropdown:(0,c.w5)((()=>[(0,c.Wm)(p,null,{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.modeSet,((e,l)=>((0,c.wg)(),(0,c.j4)(u,{key:l,class:"no-select",onClick:l=>o.setMode(e)},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,c.w5)((()=>[(0,c._)("span",wo,[(0,c.Uk)((0,m.zw)(o.mode),1),(0,c.Wm)(r,{class:"el-icon--right"},{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})])])),_:1})]),yo,(0,c._)("div",ho,[(0,c._)("div",ko,(0,m.zw)(e.$t("缩进"))+"：",1),(0,c._)("div",null,[(0,c.Wm)(g,{style:{width:"80px"},size:"small",modelValue:o.indent,"onUpdate:modelValue":l[0]||(l[0]=e=>o.indent=e),min:2,max:4,step:"2","step-strictly":!0,onChange:o.setIndent},null,8,["modelValue","onChange"])])]),_o,(0,c._)("div",bo,[(0,c.Wm)(w,{size:"small",type:"primary",onClick:o.doCopy},{default:(0,c.w5)((()=>[(0,c.Wm)(r,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(f)])),_:1}),(0,c.Uk)((0,m.zw)(e.$t("复制")),1)])),_:1},8,["onClick"])])],512),[[d.F8,"editor"==o.previewInfo.preview]]),(0,c.wy)(((0,c.wg)(),(0,c.iD)("div",Co,[(0,c.wy)((0,c.Wm)(y,{class:"preview",ref:"codeEditorRef",onHandleChange:o.handleChange,onHandleSave:o.handleSave},null,8,["onHandleChange","onHandleSave"]),[[d.F8,!o.loading&&"editor"==o.previewInfo.preview]]),o.loading||"iframe"!=o.previewInfo.preview||""==o.previewUrl?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("iframe",{key:0,class:"preview",src:o.previewUrl},null,8,xo)),o.loading||"audio"!=o.previewInfo.preview||""==o.previewUrl?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("audio",So,[(0,c._)("source",{src:o.previewUrl,type:o.previewInfo.type},null,8,Io)])),o.loading||"video"!=o.previewInfo.preview||""==o.previewUrl?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("video",Do,[(0,c._)("source",{src:o.previewUrl,type:o.previewInfo.type},null,8,To)]))])),[[k,o.loading]]),zo])),_:1},8,["modelValue","before-close"])}t(1439),t(7585),t(5315);const Eo={ref:"aceEditorRef",class:"kk-code-editor"};function Vo(e,l,t,o,a,i){return(0,c.wg)(),(0,c.iD)("div",Eo,null,512)}var Fo=t(17),Uo=t.n(Fo);t(7050),t(4783),t(2428),t(516),t(6684),t(350),t(8930),t(9986),t(2177),t(3669),t(629),t(5045),t(1564),t(6668),t(1838),t(9375),t(2606),t(1948),t(4070),t(1853),t(6347),t(4840),t(498),t(9394),t(4733),t(7366),t(5293),t(6529),t(6895),t(7389),t(8918),t(1910),t(5955),t(2376),t(8633),t(1710),t(1067),t(2841),t(1122),t(366),t(5824),t(7682),t(7535);const Ho={c:"c_cpp",cc:"c_cpp",cxx:"c_cpp",h:"c_cpp",hh:"c_cpp",cpp:"c_cpp",hpp:"c_cpp",ino:"c_cpp",cs:"csharp",css:"css",gitignore:"gitignore",go:"golang",html:"html",htm:"html",ini:"ini",conf:"ini",cfg:"ini",java:"java",js:"javascript",jsm:"javascript",cjs:"javascript",mjs:"javascript",jsx:"javascript",vue:"javascript",we:"javascript",wpy:"javascript",json:"json",jsp:"jsp",md:"markdown",markdown:"markdown",properties:"properties",py:"python",sh:"sh",bash:"sh",sql:"sql",cts:"typescript",mts:"typescript",ts:"typescript",tsx:"typescript",xml:"xml",rdf:"xml",rss:"xml",wsdl:"xml",xsl:"xml",xslt:"xml",atom:"xml",mathml:"xml",mml:"xml",xul:"xml",xbl:"xml",xaml:"xml",xsd:"xml",xhtml:"xml",yaml:"yaml",yml:"yaml",ipynb:"json",bash_history:"sh",bash_logout:"sh",bash_profile:"sh",tcshrc:"sh",bashrc:"sh",cshrc:"sh",vcxproj:"xml"},Ao=e=>{let l="txt";if(e&&e.length>0){let t=e.lastIndexOf(".");-1!=t&&(l=e.substring(t+1).toLowerCase())}return l},Ro=e=>Ho[Ao(e)]||"text";var Oo=Ro,Bo=t(18);const No="tcode-local-vars",jo="tcode-session-vars-",Ko={"/A":{desc:Be.global.t("自定义TCode"),execFlow(e){setTimeout((()=>{e.proxy.userTcodeRef.initText()}),1),e.proxy.userTcodeRef.DialogVisilble=!0}},"/O":{desc:Be.global.t("新建窗口"),execFlow(){let e=window.location.href;window.open(e,"_blank")}},"/C":{desc:Be.global.t("关闭窗口"),execFlow(){window.close()}},"/E":{desc:Be.global.t("退出登录"),execFlow(e){e.proxy.socket&&e.proxy.socket.close(3131)}},"/R":{desc:Be.global.t("刷新页面"),execFlow(){window.location.reload()}},"/H":{desc:Be.global.t("帮助"),execFlow(e){e.proxy.helpTcodeRef.DialogVisilble=!0}}},Mo={SC:{desc:Be.global.t("连接设置"),execFlow(e){e.proxy.isShowSetting=!1,e.proxy.connectSettingRef.DialogVisilble=!0}},SP:{desc:Be.global.t("偏好设置"),execFlow(e){e.proxy.isShowSetting=!1,e.proxy.styleSettingRef.DialogVisilble=!0}},SF:{desc:Be.global.t("文件管理"),execFlow(e){e.proxy.isShowSetting=!1,e.proxy.fileBlockRef.DialogVisilble=!0,e.proxy.fileBlockRef.getInitDir()}},SS:{desc:Be.global.t("重启"),execFlow(e){e.proxy.isShowSetting=!1,e.proxy.now_connect_status=e.proxy.connect_status["Connecting"],e.proxy.sshKey="",e.proxy.socket&&e.proxy.socket.close(3333),e.proxy.closeFileBlock(),e.proxy.resetTerminal(),e.proxy.doSSHConnect()}}},$o={active:!1,display:!0,outArray:[],cnt:0,variables:{session(e,l){if(void 0==l)return sessionStorage.getItem(jo+e)?JSON.parse(sessionStorage.getItem(jo+e)):null;sessionStorage.setItem(jo+e,JSON.stringify(l))},local(e,l){let t={};if(localStorage.getItem(No)&&(t=JSON.parse(u(localStorage.getItem(No)))),void 0==l)return t[e];t[e]=l,localStorage.setItem(No,r(JSON.stringify(t)))},clean(){if(0==arguments.length)return void localStorage.removeItem(No);let e={};localStorage.getItem(No)&&(e=JSON.parse(u(localStorage.getItem(No))));for(let l=0;l<arguments.length;l++)delete e[arguments[l]];localStorage.setItem(No,r(JSON.stringify(e)))}},writeOnly:null,async writeAndWait(e,l=200){e&&e.length>0&&"\n"!=e[e.length-1]&&"\r"!=e[e.length-1]&&(e+="\n"),this.cnt=this.outArray.length,this.writeOnly(e,!0),await new Promise((e=>setTimeout(e,l>0?l:0)))},write(e,l=200){return this.writeAndWait(e,l)},read(){return Po(this.outArray.slice(this.cnt))},readAll(){return Po(this.outArray.slice(0))},hide(){this.display=!1},show(){this.display=!0}},Po=e=>{let l=[],t=Lo(e);for(let o=0;o<t.length;o++){let e=Qo(t[o]);e&&""!=e&&l.push(e)}return l},Lo=e=>{let l=[];for(let t=0;t<e.length;t++){let o=e[t].split("\r\n");for(let e=0;e<o.length;e++)o[e]&&""!=o[e]&&l.push(o[e])}return l},Qo=e=>(0,Bo.Z)(e).replace(/[\x00-\x1F\x7F]/g,""),qo={"Compile Error":"Error","Execute Interrupt":"Interrupted","Not Active":"Inactive","Execute Success":"Success"},Jo={getCompletions:function(e,l,t,o,a){const i=[{name:"kkTerminal",value:"kkTerminal",meta:"kkTerminal",description:"kkTerminal API",score:1e3},{name:"variables",value:"variables",meta:"kkTerminal",description:"access variables",score:1e3},{name:"session",value:"session()",meta:"kkTerminal",description:"get or set session variables",score:1e3},{name:"local",value:"local()",meta:"kkTerminal",description:"get or set local variables",score:1e3},{name:"clean",value:"clean()",meta:"kkTerminal",description:"remove local variables",score:1e3},{name:"write",value:"write()",meta:"kkTerminal",description:"write to terminal",score:1e3},{name:"read",value:"read()",meta:"kkTerminal",description:"read lastest from terminal",score:1e3},{name:"readAll",value:"readAll()",meta:"kkTerminal",description:"read all from terminal",score:1e3},{name:"hide",value:"hide()",meta:"kkTerminal",description:"hide TCode display",score:1e3},{name:"show",value:"show()",meta:"kkTerminal",description:"show TCode display",score:1e3}];a(null,i.map((e=>({caption:e.caption||e.name,value:e.value,meta:e.meta,description:e.description||""}))))}};var Go={name:"AceEditor",setup(e,l){const t=(0,N.iH)(),o=(0,N.iH)(null),a=e=>{o.value&&o.value.setValue(e),o.value&&o.value.selection.clearSelection()},i=()=>o.value?o.value.getValue():"",s=()=>{o.value&&o.value.getSession().getUndoManager().reset()},n=e=>{o.value&&o.value.getSession().setMode(`ace/mode/${Oo(e)}`)},r=e=>{if(o.value){o.value.setReadOnly(e);const l=e?"#f0f0f0":"";t.value.style.backgroundColor=l}},u=e=>{o.value&&o.value.setOptions({tabSize:e,useSoftTabs:!1})},d=e=>{if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.preventDefault(),l.emit("handleSave",o.value.getValue());break}},p=()=>{a(""),s()};return(0,c.bv)((()=>{o.value=Uo().edit(t.value,{autoScrollEditorIntoView:!1,copyWithEmptySelection:!1,showPrintMargin:!1,highlightActiveLine:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,theme:"ace/theme/chrome",mode:"ace/mode/text"}),o.value.completers.push(Jo),o.value.session.setOption("useWorker",!1),o.value.on("change",(()=>{l.emit("handleChange")})),o.value.find("needle",{backwards:!1,wrap:!1,caseSensitive:!1,wholeWord:!1,regExp:!1}),o.value.findNext(),o.value.findPrevious(),t.value.addEventListener("keydown",d)})),(0,c.Ah)((()=>{t.value&&t.value.removeEventListener("keydown",d)})),{aceEditorRef:t,aceEditor:o,setValue:a,resetHistory:s,reset:p,setLanguage:n,getValue:i,setReadOnly:r,setTabSize:u}}};const Zo=(0,Ge.Z)(Go,[["render",Vo],["__scopeId","data-v-08e3f4e0"]]);var Yo=Zo,Xo=t(8655),ea=t(4693),la=t.n(ea);const ta=e=>Xo.detect(e).encoding,oa=(e,l)=>la().encode(e,l),aa=(e,l)=>la().decode(e,l);var ia={name:"TxtPreview",components:{AceEditor:Yo,FileIcons:el(),ArrowDown:Ue.K5e,DocumentCopy:Ue.IBc},setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(!1),i=(0,N.iH)(""),s=(0,N.iH)(""),n=(0,N.iH)(""),r=(0,N.iH)({preview:"editor",type:"text"}),u=(0,N.iH)(""),d=(0,N.iH)(),c=(0,N.iH)(null),p=async()=>{o.value=!0,S();let e=n.value;r.value=Gt(s.value),w(e),c.value=a().ajax({url:e,method:"GET",xhrFields:{responseType:"arraybuffer"},dataFilter(e){return e},success(l){if(e==n.value){if("editor"!=r.value.preview){const e=new Blob([l],{type:r.value.type});""!=u.value&&URL.revokeObjectURL(u.value),u.value=URL.createObjectURL(e)}else{g.value=ta(String.fromCharCode(...new Uint8Array(l.slice(0,102400)))),w(e);const t=aa(new Uint8Array(l),g.value);d.value.setValue(t),d.value.resetHistory(),y.value="auto",d.value.setLanguage(s.value),b()}i.value="",o.value=!1}},error(){e==n.value&&((0,j.z8)({message:Be.global.t("文件加载失败"),type:"error",grouping:!0}),S(),I())}}),await c.value},m=()=>{i.value="*"},v=e=>{"*"==i.value&&(l.emit("doSave",s.value,n.value,oa(e,g.value||"UTF-8")),i.value="")},g=(0,N.iH)(""),f=(0,N.iH)(["UTF-8","GBK","ISO-8859-1","Windows-1252"]),w=e=>{let l="UTF-8";const t=Sl(e);t.sshKey&&(l=G(t.sshKey.split("-")[1])),f.value=["UTF-8","GBK","ISO-8859-1","Windows-1252"],f.value.map((e=>e.toLowerCase())).includes(l.toLowerCase())||f.value.unshift(l),g.value&&"ascii"!=g.value.toLowerCase()?f.value.map((e=>e.toLowerCase())).includes(g.value.toLowerCase())||f.value.unshift(g.value):g.value=l},y=(0,N.iH)(""),h=(0,N.iH)(["auto","xml","bash","json"]),k=e=>{y.value!=e&&(y.value=e,d.value.setLanguage("auto"==e?s.value:"kk."+e))},_=(0,N.iH)(4),b=()=>{d.value.setTabSize(_.value)},{toClipboard:C}=(0,B.Z)(),x=async()=>{const e=d.value.getValue();e&&e.length>0?(await C(e),(0,j.z8)({message:Be.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})):(0,j.z8)({message:Be.global.t("内容为空"),type:"warning",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})},S=(e=!1)=>{e&&(s.value="",n.value="",o.value=!1),d.value&&d.value.reset(),i.value="",r.value={preview:"editor",type:"text"},""!=u.value&&(URL.revokeObjectURL(u.value),u.value=""),c.value&&(c.value.abort(),c.value=null),g.value="",f.value=["UTF-8","GBK","ISO-8859-1","Windows-1252"],y.value="",_.value=4,t.value=!1},I=e=>{setTimeout((()=>{S(!0)}),400),t.value=!1,e&&e()};return{DialogVisilble:t,initText:p,loading:o,fileName:s,fileUrl:n,previewInfo:r,previewUrl:u,codeEditorRef:d,modifyTag:i,handleChange:m,handleSave:v,encode:g,encodeSet:f,initEncode:w,mode:y,modeSet:h,setMode:k,indent:_,setIndent:b,doCopy:x,closeDialog:I,reset:S}}};const sa=(0,Ge.Z)(ia,[["render",Wo],["__scopeId","data-v-30d0e50e"]]);var na=sa;const ra=e=>((0,c.dD)("data-v-7567fb7c"),e=e(),(0,c.Cn)(),e),ua=ra((()=>(0,c._)("div",{style:{"margin-top":"-32px"}},null,-1))),da={class:"no-select"},ca={class:"errInfo no-select"},pa={class:"kk-flex"},ma=ra((()=>(0,c._)("div",{style:{width:"10px"}},null,-1))),va={style:{flex:"1"}},ga={style:{"margin-left":"10px"}},fa=ra((()=>(0,c._)("div",{style:{"margin-top":"-10px"}},null,-1)));function wa(e,l,t,o,a,i){const s=(0,c.up)("el-radio"),n=(0,c.up)("el-radio-group"),r=(0,c.up)("FileIcons"),u=(0,c.up)("el-input"),p=(0,c.up)("el-button"),v=(0,c.up)("el-dialog");return(0,c.wg)(),(0,c.j4)(v,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[2]||(l[2]=e=>o.DialogVisilble=e),"before-close":o.closeDialog,width:300,modal:!1,title:e.$t("新建"),"modal-class":"kk-dialog-class",draggable:""},{default:(0,c.w5)((()=>[ua,(0,c._)("div",da,[(0,c.Wm)(n,{modelValue:o.isDirectory,"onUpdate:modelValue":l[0]||(l[0]=e=>o.isDirectory=e),class:"ml-4"},{default:(0,c.w5)((()=>[(0,c.Wm)(s,{label:!1,size:"large"},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("文件")),1)])),_:1}),(0,c.Wm)(s,{label:!0,size:"large"},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("文件夹")),1)])),_:1})])),_:1},8,["modelValue"]),(0,c._)("div",ca,(0,m.zw)(o.err_msg),1),(0,c._)("div",pa,[(0,c._)("div",null,[1==o.isDirectory?((0,c.wg)(),(0,c.j4)(r,{key:0,style:{display:"flex",alignItems:"center"},width:24,height:24,name:"kk.txt",isFolder:!0})):((0,c.wg)(),(0,c.j4)(r,{key:1,style:{display:"flex",alignItems:"center"},width:24,height:24,name:"kk.txt",isFolder:!1}))]),ma,(0,c._)("div",va,[(0,c.Wm)(u,{size:"small",modelValue:o.name,"onUpdate:modelValue":l[1]||(l[1]=e=>o.name=e),onKeydown:(0,d.D2)(o.confirm,["enter"]),class:"w-50 m-2",placeholder:""},null,8,["modelValue","onKeydown"])]),(0,c._)("div",ga,[(0,c.Wm)(p,{size:"small",type:"primary",onClick:o.confirm},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])]),fa])),_:1},8,["modelValue","before-close","title"])}var ya={name:"MkFile",components:{FileIcons:el()},setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(""),a=(0,N.iH)(!1),i=(0,N.iH)(""),s=(0,N.iH)(""),n=()=>{if(o.value="",!(i.value&&i.value.trim().length>0))return void(o.value=Be.global.t("文件名不能为空"));const e=/[/|]/;e.test(i.value)?o.value=Be.global.t("文件名不能含有")+" |,/":(l.emit("callback",a.value,i.value,s.value),u())},r=()=>{o.value="",a.value=!1,i.value="",s.value="",t.value=!1},u=e=>{setTimeout((()=>{r()}),400),t.value=!1,e&&e()};return{DialogVisilble:t,err_msg:o,isDirectory:a,name:i,nowDir:s,confirm:n,closeDialog:u,reset:r}}};const ha=(0,Ge.Z)(ya,[["render",wa],["__scopeId","data-v-7567fb7c"]]);var ka=ha;const _a=e=>((0,c.dD)("data-v-bcda2e44"),e=e(),(0,c.Cn)(),e),ba=_a((()=>(0,c._)("div",{style:{"margin-top":"-15px"}},null,-1))),Ca={class:"kk-flex nowrap"},xa={class:"ellipsis",style:{margin:"0 5px","font-size":"small"}},Sa={style:{"font-size":"small"}},Ia=_a((()=>(0,c._)("div",{style:{"margin-top":"-32px"}},null,-1))),Da={class:"no-select","element-loading-text":"Loading..."},Ta={class:"kk-flex"},za={style:{"margin-right":"10px"}},Wa=_a((()=>(0,c._)("div",{class:"kk-border"},null,-1))),Ea={class:"kk-flex nowrap"},Va={class:"form-width"},Fa={class:"ellipsis"},Ua={key:0,class:"kk-flex"},Ha={class:"form-width"},Aa={class:"ellipsis"},Ra={key:0,style:{"margin-left":"10px"}},Oa={key:1,class:"kk-flex"},Ba={class:"form-width"},Na={class:"ellipsis"},ja={key:0,style:{"margin-left":"10px"}},Ka=_a((()=>(0,c._)("div",{class:"kk-border"},null,-1))),Ma={class:"kk-flex"},$a={class:"form-width"},Pa={class:"kk-flex"},La={class:"form-width"},Qa=_a((()=>(0,c._)("div",{class:"kk-border"},null,-1))),qa={class:"kk-flex"},Ja={class:"form-width"},Ga=_a((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),Za=_a((()=>(0,c._)("div",{style:{"margin-top":"-15px"}},null,-1)));function Ya(e,l,t,o,a,i){const s=(0,c.up)("FileIcons"),n=(0,c.up)("el-input"),r=(0,c.up)("ToolTip"),u=(0,c.up)("DocumentCopy"),p=(0,c.up)("el-icon"),v=(0,c.up)("el-tag"),g=(0,c.up)("Refresh"),f=(0,c.up)("Edit"),w=(0,c.up)("el-button"),y=(0,c.up)("el-dialog"),h=(0,c.up)("PermissionsEdit"),k=(0,c.Q2)("loading");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.Wm)(y,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[5]||(l[5]=e=>o.DialogVisilble=e),"before-close":o.closeDialog,width:400,modal:!1,"modal-class":"kk-dialog-class","align-center":"",draggable:""},{title:(0,c.w5)((()=>[ba,(0,c._)("div",Ca,[(0,c.Wm)(s,{style:{display:"flex",alignItems:"center"},name:o.fileInfo.name,width:16,height:16,isFolder:o.fileInfo.isDirectory,isLink:o.fileInfo.isSymlink},null,8,["name","isFolder","isLink"]),(0,c._)("div",xa,(0,m.zw)(o.fileInfo.name),1),(0,c._)("div",Sa,(0,m.zw)(e.$t("属性")),1)])])),default:(0,c.w5)((()=>[Ia,(0,c.wy)(((0,c.wg)(),(0,c.iD)("div",Da,[(0,c._)("div",Ta,[(0,c._)("div",za,[(0,c.Wm)(s,{style:{display:"flex",alignItems:"center"},name:o.fileInfo.name,width:32,height:32,isFolder:o.fileInfo.isDirectory,isLink:o.fileInfo.isSymlink},null,8,["name","isFolder","isLink"])]),(0,c._)("div",null,[(0,c.Wm)(n,{onKeydown:(0,d.D2)(o.confirm,["enter"]),modelValue:o.rename,"onUpdate:modelValue":l[0]||(l[0]=e=>o.rename=e),placeholder:""},null,8,["onKeydown","modelValue"])])]),Wa,(0,c._)("div",Ea,[(0,c._)("div",Va,(0,m.zw)(e.$t("位置"))+"：",1),(0,c.Wm)(r,{content:o.fileDir+o.fileInfo.name},{content:(0,c.w5)((()=>[(0,c._)("div",Fa,(0,m.zw)(o.fileDir+o.fileInfo.name),1)])),_:1},8,["content"]),(0,c._)("div",{style:{cursor:"pointer","margin-left":"7px"},onClick:l[1]||(l[1]=e=>o.doCopy(o.fileDir+o.fileInfo.name))},[(0,c.Wm)(p,{size:"18"},{default:(0,c.w5)((()=>[(0,c.Wm)(u)])),_:1})])]),o.fileInfo.isDirectory?((0,c.wg)(),(0,c.iD)("div",Ua,[(0,c._)("div",Ha,(0,m.zw)(e.$t("包含"))+"：",1),(0,c._)("div",Aa,(0,m.zw)(o.includeInfo),1),o.fileInfo.isSymlink||o.unreliable?((0,c.wg)(),(0,c.iD)("div",Ra,[(0,c.Wm)(v,{size:"small",type:"danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("unsure")])),_:1})])):(0,c.kq)("",!0),(0,c._)("div",{style:{cursor:"pointer","margin-left":"7px"},onClick:l[2]||(l[2]=(...e)=>o.getFolderInclude&&o.getFolderInclude(...e))},[(0,c.Wm)(p,{size:"18"},{default:(0,c.w5)((()=>[(0,c.Wm)(g)])),_:1})])])):((0,c.wg)(),(0,c.iD)("div",Oa,[(0,c._)("div",Ba,(0,m.zw)(e.$t("大小"))+"：",1),(0,c._)("div",Na,(0,m.zw)(o.calcSize(o.fileInfo.attributes.size))+" ("+(0,m.zw)(o.fileInfo.attributes.size+" "+e.$t("字节"))+") ",1),o.fileInfo.isSymlink||o.unreliable?((0,c.wg)(),(0,c.iD)("div",ja,[(0,c.Wm)(v,{size:"small",type:"danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("unsure")])),_:1})])):(0,c.kq)("",!0),(0,c._)("div",{style:{cursor:"pointer","margin-left":"7px"},onClick:l[3]||(l[3]=(...e)=>o.getFileSize&&o.getFileSize(...e))},[(0,c.Wm)(p,{size:"18"},{default:(0,c.w5)((()=>[(0,c.Wm)(g)])),_:1})])])),Ka,(0,c._)("div",Ma,[(0,c._)("div",$a,(0,m.zw)(e.$t("修改时间"))+"：",1),(0,c._)("div",null,(0,m.zw)(o.formatDate(o.fileInfo.attributes.mtime)),1)]),(0,c._)("div",Pa,[(0,c._)("div",La,(0,m.zw)(e.$t("访问时间"))+"：",1),(0,c._)("div",null,(0,m.zw)(o.formatDate(o.fileInfo.attributes.atime)),1)]),Qa,(0,c._)("div",qa,[(0,c._)("div",Ja,(0,m.zw)(e.$t("权限"))+"：",1),(0,c._)("div",null,(0,m.zw)(o.calcPriority(o.fileInfo.attributes.mode.type,o.fileInfo.attributes.permissions)),1),(0,c._)("div",{style:{cursor:"pointer","margin-left":"7px"},onClick:l[4]||(l[4]=(...e)=>o.openEditPermissions&&o.openEditPermissions(...e))},[(0,c.Wm)(p,{size:"18"},{default:(0,c.w5)((()=>[(0,c.Wm)(f)])),_:1})]),Ga,(0,c._)("div",null,[(0,c.Wm)(w,{size:"small",type:"primary",onClick:o.confirm},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])])),[[k,o.loading]]),Za])),_:1},8,["modelValue","before-close"]),(0,c.Wm)(h,{ref:"permissionsEditRef",onEditPermissions:o.editPermissions},null,8,["onEditPermissions"])],64)}const Xa=e=>{if(!e)return"";let l=new Date(1e3*e),t=l.getFullYear(),o=l.getMonth()+1,a=l.getDate(),i=l.getHours(),s=l.getMinutes(),n=l.getSeconds();o<10&&(o="0"+o),a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),n<10&&(n="0"+n);let r=null;return r="zh"===Be.global.locale?[t,o,a]:[o,a,t],r[0]+Be.global.t("年")+r[1]+Be.global.t("月")+r[2]+Be.global.t("日，")+i+":"+s+":"+n},ei=e=>{if(null==e||void 0==e)return"";let l="";l=e<1024?e.toFixed(2)+" B":e<1048576?(e/1024).toFixed(2)+" KB":e<1073741824?(e/1048576).toFixed(2)+" MB":(e/1073741824).toFixed(2)+" GB";let t=l+"",o=t.indexOf("."),a=t.substring(o+1,o+3);return"00"==a?t.substring(0,o)+t.substring(o+3):l},li=e=>((0,c.dD)("data-v-96f92c8a"),e=e(),(0,c.Cn)(),e),ti=li((()=>(0,c._)("div",{style:{"margin-top":"-15px"}},null,-1))),oi={class:"kk-flex nowrap"},ai={class:"ellipsis",style:{margin:"0 5px","font-size":"small"}},ii={style:{"font-size":"small"}},si=li((()=>(0,c._)("div",{style:{"margin-top":"-25px"}},null,-1))),ni={class:"kk-flex"},ri={class:"form-width no-select"},ui={class:"kk-flex"},di={class:"form-width no-select"},ci={class:"kk-flex"},pi={class:"form-width no-select"},mi=li((()=>(0,c._)("div",{style:{"margin-bottom":"5px"}},null,-1))),vi={style:{display:"flex","align-items":"center","border-top":"1px solid #f1f2f4"}},gi=li((()=>(0,c._)("div",{style:{flex:"1"}},null,-1)));function fi(e,l,t,o,a,i){const s=(0,c.up)("FileIcons"),n=(0,c.up)("el-checkbox"),r=(0,c.up)("el-button"),u=(0,c.up)("el-dialog");return(0,c.wg)(),(0,c.j4)(u,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[10]||(l[10]=e=>o.DialogVisilble=e),"before-close":o.closeDialog,width:e.$t("360"),modal:!1,"modal-class":"kk-dialog-class","align-center":"",draggable:""},{title:(0,c.w5)((()=>[ti,(0,c._)("div",oi,[(0,c.Wm)(s,{style:{display:"flex",alignItems:"center"},name:o.fileInfo.name,width:16,height:16,isFolder:o.fileInfo.isDirectory,isLink:o.fileInfo.isSymlink},null,8,["name","isFolder","isLink"]),(0,c._)("div",ai,(0,m.zw)(o.fileInfo.name),1),(0,c._)("div",ii,(0,m.zw)(e.$t("权限修改")),1)])])),default:(0,c.w5)((()=>[si,(0,c._)("div",ni,[(0,c._)("div",ri,(0,m.zw)(e.$t("所有者"))+"：",1),(0,c.Wm)(n,{modelValue:o.permissionsInfo.owner[0],"onUpdate:modelValue":l[0]||(l[0]=e=>o.permissionsInfo.owner[0]=e),label:e.$t("读取"),size:"large"},null,8,["modelValue","label"]),(0,c.Wm)(n,{modelValue:o.permissionsInfo.owner[1],"onUpdate:modelValue":l[1]||(l[1]=e=>o.permissionsInfo.owner[1]=e),label:e.$t("写入"),size:"large"},null,8,["modelValue","label"]),(0,c.Wm)(n,{modelValue:o.permissionsInfo.owner[2],"onUpdate:modelValue":l[2]||(l[2]=e=>o.permissionsInfo.owner[2]=e),label:e.$t("执行"),size:"large"},null,8,["modelValue","label"])]),(0,c._)("div",ui,[(0,c._)("div",di,(0,m.zw)(e.$t("所属组"))+"：",1),(0,c.Wm)(n,{modelValue:o.permissionsInfo.group[0],"onUpdate:modelValue":l[3]||(l[3]=e=>o.permissionsInfo.group[0]=e),label:e.$t("读取"),size:"large"},null,8,["modelValue","label"]),(0,c.Wm)(n,{modelValue:o.permissionsInfo.group[1],"onUpdate:modelValue":l[4]||(l[4]=e=>o.permissionsInfo.group[1]=e),label:e.$t("写入"),size:"large"},null,8,["modelValue","label"]),(0,c.Wm)(n,{modelValue:o.permissionsInfo.group[2],"onUpdate:modelValue":l[5]||(l[5]=e=>o.permissionsInfo.group[2]=e),label:e.$t("执行"),size:"large"},null,8,["modelValue","label"])]),(0,c._)("div",ci,[(0,c._)("div",pi,(0,m.zw)(e.$t("其他用户"))+"：",1),(0,c.Wm)(n,{modelValue:o.permissionsInfo.others[0],"onUpdate:modelValue":l[6]||(l[6]=e=>o.permissionsInfo.others[0]=e),label:e.$t("读取"),size:"large"},null,8,["modelValue","label"]),(0,c.Wm)(n,{modelValue:o.permissionsInfo.others[1],"onUpdate:modelValue":l[7]||(l[7]=e=>o.permissionsInfo.others[1]=e),label:e.$t("写入"),size:"large"},null,8,["modelValue","label"]),(0,c.Wm)(n,{modelValue:o.permissionsInfo.others[2],"onUpdate:modelValue":l[8]||(l[8]=e=>o.permissionsInfo.others[2]=e),label:e.$t("执行"),size:"large"},null,8,["modelValue","label"])]),mi,(0,c._)("div",vi,[o.fileInfo.isDirectory?((0,c.wg)(),(0,c.j4)(n,{key:0,modelValue:o.permissionsInfo.sub,"onUpdate:modelValue":l[9]||(l[9]=e=>o.permissionsInfo.sub=e),label:e.$t("应用到子目录和文件"),size:"small",style:{"margin-bottom":"-15px","margin-top":"10px"}},null,8,["modelValue","label"])):(0,c.kq)("",!0),gi,(0,c.Wm)(r,{size:"small",type:"primary",onClick:o.confirm,style:{"margin-bottom":"-15px","margin-top":"10px"}},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close","width"])}var wi={name:"PermissionsEdit",components:{FileIcons:el()},setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(""),a=(0,N.iH)({attributes:{mode:{type:""},permissions:""}}),i=(0,N.iH)({owner:[!1,!1,!1],group:[!1,!1,!1],others:[!1,!1,!1],sub:!1}),s=()=>{i.value=Yt(a.value.attributes.permissions)},n=()=>{l.emit("editPermissions",o.value,a.value.name,i.value)},r=()=>{o.value="",a.value={attributes:{mode:{type:""},permissions:""}},i.value={owner:[!1,!1,!1],group:[!1,!1,!1],others:[!1,!1,!1],sub:!1},t.value=!1},u=e=>{setTimeout((()=>{r()}),400),t.value=!1,e&&e()};return{fileDir:o,fileInfo:a,DialogVisilble:t,closeDialog:u,init:s,permissionsInfo:i,getPermissionInfo:Yt,confirm:n}}};const yi=(0,Ge.Z)(wi,[["render",fi],["__scopeId","data-v-96f92c8a"]]);var hi=yi,ki={name:"FileAttr",components:{ToolTip:xl,FileIcons:el(),DocumentCopy:Ue.IBc,Refresh:Ue.hYj,Edit:Ue.I8b,PermissionsEdit:hi},props:["sshKey"],setup(e,l){const{toClipboard:t}=(0,B.Z)(),o=(0,N.iH)(!1),i=(0,N.iH)({}),s=(0,N.iH)(""),n=(0,N.iH)(""),r=(0,N.iH)(!0),u=(0,N.iH)(!1),d=(0,N.iH)(Be.global.t("0 个文件，0 个文件夹")),c=()=>{a().ajax({url:q+"/du",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey,path:X(s.value),item:ee(i.value.name)},beforeSend:function(){r.value=!0},success(e){"success"==e.status?i.value.attributes.size=parseInt(e.data,10):u.value=!0},complete:function(){r.value=!1}})},p=()=>{a().ajax({url:q+"/find",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey,path:X(s.value),item:ee(i.value.name)},beforeSend:function(){r.value=!0},success(e){"success"==e.status?d.value=e.data[0]+Be.global.t(" 个文件，")+Math.max(0,parseInt(e.data[1],10)-1)+Be.global.t(" 个文件夹"):u.value=!0},complete:function(){r.value=!1}})},m=()=>{if(i.value.name==n.value)return void h();if(!(n.value&&n.value.trim().length>0))return void(0,j.z8)({message:Be.global.t("文件名不能为空"),type:"warning",grouping:!0});const e=/[/|]/;if(e.test(n.value))return void(0,j.z8)({message:Be.global.t("文件名不能含有")+" |,/",type:"warning",grouping:!0});let t=s.value+i.value.name,o=s.value+n.value;l.emit("callback",t,o),h()},v=async e=>{e+="",e&&e.length>0?(await t(e),(0,j.z8)({message:Be.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})):(0,j.z8)({message:Be.global.t("内容为空"),type:"warning",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})},g=(e,t,o)=>{l.emit("editPermissions",e,t,o)},f=()=>{i.value={attributes:{mode:{type:""},permissions:""}},n.value="",s.value="",r.value=!1,u.value=!1,d.value=Be.global.t("0 个文件，0 个文件夹"),o.value=!1},w=(0,N.iH)(),y=()=>{w.value.fileDir=s.value,w.value.fileInfo=i.value,w.value.DialogVisilble=!0,w.value.init()},h=e=>{w.value&&w.value.closeDialog(),setTimeout((()=>{f()}),400),o.value=!1,e&&e()};return{DialogVisilble:o,fileInfo:i,confirm:m,closeDialog:h,reset:f,fileDir:s,rename:n,formatDate:Xa,calcPriority:Zt,calcSize:ei,doCopy:v,loading:r,unreliable:u,includeInfo:d,getFileSize:c,getFolderInclude:p,permissionsEditRef:w,openEditPermissions:y,editPermissions:g}}};const _i=(0,Ge.Z)(ki,[["render",Ya],["__scopeId","data-v-bcda2e44"]]);var bi=_i;const Ci=e=>((0,c.dD)("data-v-73c3d5c6"),e=e(),(0,c.Cn)(),e),xi=Ci((()=>(0,c._)("div",{style:{"margin-top":"-32px"}},null,-1))),Si={class:"no-select"},Ii={class:"kk-flex"},Di=Ci((()=>(0,c._)("div",{class:"form-width"},"URL：",-1))),Ti={style:{flex:"1"}},zi={key:0,class:"errInfo no-select"},Wi={key:1,style:{height:"7px"}},Ei={class:"kk-flex"},Vi={class:"form-width"},Fi={style:{flex:"1"}},Ui={style:{"margin-left":"10px"}},Hi=Ci((()=>(0,c._)("div",{style:{"margin-top":"-10px"}},null,-1)));function Ai(e,l,t,o,a,i){const s=(0,c.up)("Connection"),n=(0,c.up)("el-icon"),r=(0,c.up)("el-input"),u=(0,c.up)("Document"),p=(0,c.up)("el-button"),v=(0,c.up)("el-dialog");return(0,c.wg)(),(0,c.j4)(v,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[2]||(l[2]=e=>o.DialogVisilble=e),"before-close":o.closeDialog,width:320,modal:!1,title:e.$t("URL上传"),"modal-class":"kk-dialog-class",draggable:""},{default:(0,c.w5)((()=>[xi,(0,c._)("div",Si,[(0,c._)("div",Ii,[Di,(0,c._)("div",Ti,[(0,c.Wm)(r,{size:"small",modelValue:o.url,"onUpdate:modelValue":l[0]||(l[0]=e=>o.url=e),class:"w-50 m-2",placeholder:e.$t("请输入文件URL")},{prefix:(0,c.w5)((()=>[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(s)])),_:1})])),_:1},8,["modelValue","placeholder"])])]),o.err_msg&&o.err_msg.length>0?((0,c.wg)(),(0,c.iD)("div",zi,(0,m.zw)(o.err_msg),1)):((0,c.wg)(),(0,c.iD)("div",Wi)),(0,c._)("div",Ei,[(0,c._)("div",Vi,(0,m.zw)(e.$t("文件名"))+"：",1),(0,c._)("div",Fi,[(0,c.Wm)(r,{size:"small",modelValue:o.name,"onUpdate:modelValue":l[1]||(l[1]=e=>o.name=e),onKeydown:(0,d.D2)(o.confirm,["enter"]),class:"w-50 m-2",placeholder:e.$t("请输入文件名")},{prefix:(0,c.w5)((()=>[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(u)])),_:1})])),_:1},8,["modelValue","onKeydown","placeholder"])]),(0,c._)("div",Ui,[(0,c.Wm)(p,{size:"small",type:"primary",onClick:o.confirm},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])]),Hi])),_:1},8,["modelValue","before-close","title"])}var Ri={name:"FileUrl",components:{Connection:Ue.ewe,Document:Ue.BBB},setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(""),a=(0,N.iH)(""),i=(0,N.iH)(""),s=()=>{if(o.value="",!(i.value&&i.value.trim().length>0))return void(o.value=Be.global.t("URL不能为空"));if(!(a.value&&a.value.trim().length>0))return void(o.value=Be.global.t("文件名不能为空"));const e=/[/|]/;e.test(a.value)?o.value=Be.global.t("文件名不能含有")+" |,/":(l.emit("callback",i.value,a.value),r())},n=()=>{o.value="",a.value="",i.value="",t.value=!1},r=e=>{setTimeout((()=>{n()}),400),t.value=!1,e&&e()};return{DialogVisilble:t,err_msg:o,name:a,url:i,confirm:s,closeDialog:r,reset:n}}};const Oi=(0,Ge.Z)(Ri,[["render",Ai],["__scopeId","data-v-73c3d5c6"]]);var Bi=Oi,Ni={name:"FileBlock",components:{ToolTip:xl,NoData:Ye,FileIcons:el(),TxtPreview:na,MkFile:ka,FileAttr:bi,FileUrl:Bi,Refresh:Ue.hYj,Fold:Ue.qFw,Download:Ue.UWx,Upload:Ue.gqx,DocumentAdd:Ue.kb8,FolderAdd:Ue.FDh,Link:Ue.rUS},props:["sshKey","os"],setup(e){const l=(0,N.iH)(!0),{toClipboard:t}=(0,B.Z)(),o=(0,N.iH)([]),i=(0,N.iH)([]);let s=-1;const n=(l,t,a=!0)=>{l.preventDefault();const n=r(t.id);if(a)if(l.shiftKey)if(0==i.value.length||-1==s||s>=o.value.length){i.value=[];for(let e=0;e<=t.index;e++)i.value.push({...o.value[e]});s=-1}else{i.value=[];const e=Math.min(t.index,s),l=Math.max(t.index,s);for(let t=e;t<=l;t++)i.value.push({...o.value[t]})}else"Windows"==e.os&&l.ctrlKey||("Mac"==e.os||"iOS"==e.os)&&l.metaKey?(s=t.index,-1!=n?i.value.splice(n,1):i.value.push(t)):(s=t.index,i.value=[],i.value.push(t));else-1==n&&(s=t.index,i.value=[],i.value.push(t))},r=e=>{for(let l=0;l<i.value.length;l++)if(e==i.value[l].id)return l;return-1},u=e=>{for(let l=0;l<de.value.files.length;l++)if(e==de.value.files[l].id)return l;return-1},d=e=>{for(let l=0;l<o.value.length;l++)if(o.value[l].name==e)return o.value[l];return null},p=(0,N.iH)(""),m=(0,N.iH)([]),v=()=>{""!=p.value&&"/"==p.value[0]||(p.value="/"+p.value),"/"!=p.value[p.value.length-1]&&(p.value=p.value+"/"),p.value=p.value.replace(/\/{2,}/g,"/"),g(p.value)},g=e=>{m.value="/"==e?[]:e.substring(1,e.length-1).split("/")},f=(l,t)=>{if(!("Windows"==e.os&&l.ctrlKey||("Mac"==e.os||"iOS"==e.os)&&l.metaKey))return;l.preventDefault();let o="/";for(let e=0;e<=t;e++)o+=m.value[e],o+="/";I(o)},w=(0,N.iH)(!1),y=()=>{""==p.value&&a().ajax({url:q+"/home",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey},success(e){"success"==e.status?(h.value=Be.global.t("暂无文件"),k.value=0,p.value=e.data,v(),i.value=[],o.value=[],_()):(h.value=e.info,k.value=1,l.value=!1)}})},h=(0,N.iH)(Be.global.t("暂无文件")),k=(0,N.iH)(0),_=()=>{if(""==p.value)return void y();let t=p.value;a().ajax({url:q+"/ls",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey,path:t},beforeSend:function(){l.value=!0,o.value=[]},success(e){if(t==p.value)if(i.value=[],"success"==e.status){if(o.value=e.data,h.value=Be.global.t("暂无文件"),k.value=0,s=-1,O.value.tabindex="0",O.value.focus(),G.value&&G.value.DialogVisilble){let e=d(G.value.fileInfo.name);e?(G.value.reset(),G.value.DialogVisilble=!0,G.value.fileInfo=e,G.value.fileDir=p.value,G.value.rename=e.name,e.isDirectory?G.value.getFolderInclude():G.value.getFileSize()):G.value.closeDialog()}}else o.value=[],h.value=e.info,k.value=1,s=-1,O.value.tabindex="0",O.value.focus()},complete:function(){t==p.value&&(l.value=!1)}})},b=(l,t)=>q+"/download/remote/file?time="+(new Date).getTime()+"&fileName="+encodeURIComponent(l)+"&sshKey="+e.sshKey+"&path="+encodeURIComponent(t||p.value),C=(l,t)=>q+"/download/remote/folder?time="+(new Date).getTime()+"&folderName="+encodeURIComponent(ee(l))+"&sshKey="+e.sshKey+"&path="+encodeURIComponent(X(t||p.value)),x=e=>{if(1==w.value)return;let l=document.createElement("a");l.href=b(e),document.body.appendChild(l),l.click(),document.body.removeChild(l)},S=e=>{if(1==w.value)return;let l=document.createElement("a");l.href=C(e),document.body.appendChild(l),l.click(),document.body.removeChild(l)},I=e=>{1!=w.value&&(p.value=e,v(),i.value=[],_())},D=()=>{w.value=!1,v(),i.value=[],_()},T=()=>{w.value=!1,_()},z=()=>{if(1==w.value)return;if("/"==p.value)return;"/"==p.value[p.value.length-1]&&(p.value=p.value.substring(0,p.value.length-1));let e=p.value.lastIndexOf("/");-1!=e&&(p.value=p.value.substring(0,e+1)),v(),i.value=[],T()},W=()=>{1!=w.value&&(1==i.value.length&&i.value[0].name&&i.value[0].isDirectory&&S(i.value[0].name),1==i.value.length&&i.value[0].name&&!i.value[0].isDirectory&&x(i.value[0].name))},E=2225152,V=async(l,t={})=>{try{if(1==w.value)return;let o=l.file;if(!o)return;const i=o.name,s=o.size,n=0==parseInt(Math.ceil(s/E))?1:parseInt(Math.ceil(s/E)),r=o.uid;let u=1;const d=t.pathVal?t.pathVal:p.value;s>20971520&&!t.noStartUpLoad&&(0,j.z8)({message:t.startUpLoad?t.startUpLoad:Be.global.t("开始上传"),type:"success",grouping:!0});for(let l=u;l<=n;l++){let u=(l-1)*E,c=u+E>=s?s:u+E,m=o.slice(u,c),v=new FormData;v.append("file",m),v.append("fileName",i),v.append("chunks",n),v.append("chunk",l),v.append("totalSize",s),v.append("id",r),v.append("sshKey",e.sshKey),v.append("path",d),await a().ajax({url:q+"/upload",type:"post",data:v,contentType:!1,processData:!1,success(e){202==e.code?((0,j.z8)({message:t.alert?t.alert:e.info,type:e.status,grouping:!0}),d==p.value&&setTimeout((()=>{_()}),Math.min(1e3,500+10*n))):(502==e.code||503==e.code||504==e.code||602==e.code)&&((0,j.z8)({message:e.info,type:e.status,grouping:!0}),l=n+1)}})}}catch(o){(0,j.z8)({message:Be.global.t("文件上传失败"),type:"error",grouping:!0})}},F=l=>{"Windows"==e.os&&l.ctrlKey||("Mac"==e.os||"iOS"==e.os)&&l.metaKey||(w.value=!0,setTimeout((()=>{document.querySelector("#aimDirInput").focus()}),1))},U=(0,N.iH)(!1),H=(0,N.iH)(),A=e=>{H.value.fileName=e,H.value.fileUrl=b(e),H.value.loading=!0,H.value.initText(),H.value.DialogVisilble=!0},R=(l,t,o)=>{const a=Sl(t);if(a.sshKey!=e.sshKey)return;const i=new Blob([o],{type:"application/octet-stream"}),s=new File([i],l);s.uid=Math.random().toString(36).substring(2),V({file:s},{pathVal:a.path,startUpLoad:Be.global.t("修改保存中"),alert:Be.global.t("文件后台保存中")})},O=(0,N.iH)(),K=e=>{e.preventDefault()},M=l=>{l.preventDefault();const t=l.dataTransfer.items;if(!(t&&t.length>0))return;let o=p.value;for(let i=0;i<t.length;i++){let l=t[i].webkitGetAsEntry();if(l.isFile&&!l.isDirectory)l.file((e=>{e.uid=Math.random().toString(36).substring(2),V({file:e},{pathVal:o})}));else if(!l.isFile&&l.isDirectory){const t=o+l.name;a().ajax({url:q+"/mkdir",type:"post",data:{sshKey:e.sshKey,path:o,item:l.name},success(e){"success"==e.status?(_(),$(l,t+"/")):(0,j.z8)({message:e.info,type:e.status,grouping:!0})}})}}},$=(l,t)=>{const o=l.createReader();o.readEntries((l=>{for(let o=0;o<l.length;o++){const i=l[o];if(i.isFile&&!i.isDirectory)i.file((e=>{e.uid=Math.random().toString(36).substring(2),V({file:e},{pathVal:t,noStartUpLoad:!0})}));else if(!i.isFile&&i.isDirectory){const l=t+i.name;a().ajax({url:q+"/mkdir",type:"post",data:{sshKey:e.sshKey,path:t,item:i.name},success(e){"success"==e.status?$(i,l+"/"):(0,j.z8)({message:e.info,type:e.status,grouping:!0})}})}}}))},P=(0,N.iH)(!1),L=(0,N.iH)(!1),Q=(0,N.iH)(!1),J=(0,N.iH)({}),G=(0,N.iH)(),Z=async e=>{switch(e){case 1:T();break;case 2:1==i.value.length&&1==i.value[0].isDirectory?I(p.value+i.value[0].name+"/"):1==i.value.length&&0==i.value[0].isDirectory&&A(i.value[0].name);break;case 3:if(p.value&&p.value.length>0){const e=p.value+(1==i.value.length?i.value[0].name:"");await t(e),(0,j.z8)({message:Be.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})}else(0,j.z8)({message:Be.global.t("内容为空"),type:"warning",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER});break;case 4:1==i.value.length&&W();break;case 5:ne.value.nowDir=p.value,ne.value.DialogVisilble=!0;break;case 6:1==i.value.length&&(J.value={...i.value[0]},Q.value=!0,setTimeout((()=>{document.querySelector("#rename").focus()}),1));break;case 7:L.value=!0;break;case 8:1==i.value.length&&(G.value.reset(),G.value.fileInfo={...i.value[0]},G.value.fileDir=p.value,G.value.rename=i.value[0].name,i.value[0].isDirectory?G.value.getFolderInclude():G.value.getFileSize(),G.value.DialogVisilble=!0);break;case 9:1==i.value.length&&Lt(i.value[0].name)&&he();break;default:break}7!=e&&(P.value=!1,L.value=!1)},Y=()=>{P.value=!1,L.value=!1},le=(0,N.iH)(),te=e=>{"fileArea"==e.target.id&&(i.value=[]),le.value.style.top=e.clientY-135+"px",le.value.style.left=e.clientX+1+"px",P.value=!0,L.value=!1,e.preventDefault()},oe=e=>{if(Q.value=!1,e.name==J.value.name)return void(J.value={});if(!(J.value.name&&J.value.name.trim().length>0))return(0,j.z8)({message:Be.global.t("文件名不能为空"),type:"warning",grouping:!0}),void(J.value={});const l=/[/|]/;if(l.test(J.value.name))return(0,j.z8)({message:Be.global.t("文件名不能含有")+" |,/",type:"warning",grouping:!0}),void(J.value={});let t=p.value+e.name,o=p.value+J.value.name;J.value={},ae(t,o)},ae=(l,t)=>{a().ajax({url:q+"/rename",type:"post",data:{sshKey:e.sshKey,oldPath:l,newPath:t},success(e){(0,j.z8)({message:e.info,type:e.status,grouping:!0}),_()}})},ie=()=>{P.value=!1,L.value=!1,0!=i.value.length&&a().ajax({url:q+"/rm-rf",type:"post",data:{sshKey:e.sshKey,path:X(p.value),items:i.value.map((e=>ee(e.name))).join(" ")},success(e){(0,j.z8)({message:e.info,type:e.status,grouping:!0}),_()}})},se=()=>{L.value=!1},ne=(0,N.iH)(),re=(l,t,o)=>{a().ajax({url:q+(l?"/mkdir":"/touch"),type:"post",data:{sshKey:e.sshKey,path:l?o:X(o),item:l?t:ee(t)},success(e){(0,j.z8)({message:e.info,type:e.status,grouping:!0}),_()}})};(0,c.YP)(p,(()=>{ne.value&&ne.value.closeDialog(),we.value&&we.value.closeDialog(),G.value&&G.value.closeDialog()}));const ue=e=>{const l=31,t=e*l,o=t+l,a=O.value.clientHeight,i=O.value.scrollTop;t<i?O.value.scrollTop=t:o>i+a&&(O.value.scrollTop=o-a)},de=(0,N.iH)({path:"/",files:[]}),ce=(0,N.iH)(!1),pe=l=>{const t=document.querySelector("#rename");if(!t||!t.contains(l.target)){if(l.preventDefault(),"ArrowUp"!==l.key&&"ArrowDown"!==l.key||("ArrowUp"===l.key?((-1==s||s>o.value.length)&&(s=o.value.length),s--,s=Math.max(0,s)):"ArrowDown"===l.key&&(s++,s=Math.min(o.value.length-1,s)),P.value=!1,L.value=!1,i.value=[],i.value.push(o.value[s]),ue(s)),"Enter"===l.key){if(P.value||L.value)return P.value=!1,void(L.value=!1);if(1==i.value.length){const e=i.value[0];e.isDirectory?I(p.value+e.name+"/"):A(e.name)}}if("Windows"==e.os&&l.ctrlKey||("Mac"==e.os||"iOS"==e.os)&&l.metaKey)switch(String.fromCharCode(l.which).toLowerCase()){case"a":i.value=[];for(let e=0;e<o.value.length;e++)i.value.push({...o.value[e]});break;case"c":i.value.length>0&&(de.value.path=p.value,de.value.files=i.value.slice(0),ce.value=!1);break;case"v":if(0==de.value.files.length)return;me(ce.value?"mv":"cp"),ce.value&&(ce.value=!1,de.value={path:"/",files:[]});break;case"x":de.value.path=p.value,de.value.files=i.value.slice(0),ce.value=!0;break}}},me=l=>{de.value.path!=p.value&&a().ajax({url:q+"/"+l,type:"post",data:{sshKey:e.sshKey,src:X(de.value.path),dst:X(p.value),items:de.value.files.map((e=>ee(e.name))).join(" ")},success(e){"success"==e.status?_():((0,j.z8)({message:e.info,type:e.status,grouping:!0}),de.value={path:"/",files:[]})}})},ve=e=>{0==e?document.querySelector("#fileUploadInputButton").click():1==e?(document.querySelector("#folderUploadInput").value="",document.querySelector("#folderUploadInput").click()):2==e&&(we.value.DialogVisilble=!0)},ge=e=>{let l=p.value,t={};for(let a=0;a<e.target.files["length"];a++){let l=e.target.files[a],o=l["webkitRelativePath"],i=o.lastIndexOf("/"),s=o.substring(0,i+1);t[s]||(t[s]={path:s,files:[]}),t[s].files.push(l)}let o=[];for(let a in t)o.push(t[a]);o.sort(((e,l)=>e.path.length-l.path.length)),fe(l,o,0)},fe=(l,t,o)=>{const i=t[o];a().ajax({url:q+"/mkdir",type:"post",data:{sshKey:e.sshKey,path:l,item:i.path},success(e){if("success"==e.status){0==o&&_(),o<t.length-1&&fe(l,t,o+1);for(let e=0;e<i.files.length;e++){const t=i.files[e];t.uid=Math.random().toString(36).substring(2),V({file:t},{pathVal:l+i.path,noStartUpLoad:!0})}}else(0,j.z8)({message:Be.global.t("文件夹上传失败"),type:e.status,grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})}})},we=(0,N.iH)(),ye=(l,t)=>{a().ajax({url:q+"/wget",type:"post",data:{sshKey:e.sshKey,path:X(p.value),item:ee(t),url:encodeURI(l)},success(e){(0,j.z8)({message:e.info,type:e.status,grouping:!0}),_()}})},he=()=>{a().ajax({url:q+"/untar",type:"post",data:{sshKey:e.sshKey,path:X(p.value),item:ee(i.value[0].name)},success(e){(0,j.z8)({message:e.info,type:e.status,grouping:!0}),_()}})},ke=(l,t,o)=>{a().ajax({url:q+"/chmod",type:"post",data:{sshKey:e.sshKey,path:X(l),item:ee(t),perms:Xt(o),sub:o.sub||!1},success(e){(0,j.z8)({message:e.info,type:e.status,grouping:!0}),"success"==e.status&&(G.value&&G.value.permissionsEditRef&&G.value.permissionsEditRef.closeDialog(),_())}})},_e=(e=!1)=>{e&&(l.value=!0,o.value=[],p.value="",m.value=[],w.value=!1,h.value=Be.global.t("暂无文件"),k.value=0,de.value={path:"/",files:[]},ce.value=!1),i.value=[],s=-1,P.value=!1,L.value=!1,Q.value=!1,J.value={},U.value=!1},be=e=>{H.value&&H.value.DialogVisilble&&H.value.closeDialog(),ne.value&&ne.value.DialogVisilble&&ne.value.closeDialog(),G.value&&G.value.DialogVisilble&&G.value.closeDialog(),we.value&&we.value.DialogVisilble&&we.value.closeDialog(),setTimeout((()=>{_e()}),400),U.value=!1,e&&e()},Ce=()=>{H.value&&H.value.closeDialog(),ne.value&&ne.value.closeDialog(),G.value&&G.value.closeDialog(),we.value&&we.value.closeDialog(),setTimeout((()=>{_e(!0)}),400),U.value=!1};return(0,c.bv)((()=>{document.addEventListener("mousedown",(e=>{if(O.value&&O.value.contains(e.target)&&(O.value.tabindex="0",O.value.focus()),le.value&&le.value.contains(e.target))return;const l=document.querySelector(".confirmPop");l&&l.contains(e.target)||(P.value=!1,L.value=!1)}))})),(0,c.Ah)((()=>{O.value&&(O.value.removeEventListener("dragover",K),O.value.removeEventListener("drop",M),O.value.removeEventListener("scroll",Y),O.value.removeEventListener("keydown",pe))})),{DialogVisilble:U,isShowDirInput:w,dir:p,files:o,getInitDir:y,getDirList:_,downloadRemoteFile:x,downloadDir:S,changeDir:I,dirInputCallback:D,noDataMsg:h,doRefresh:T,doReturn:z,doDownload:W,doUpload:V,selectedFiles:i,loading:l,txtPreviewRef:H,preViewFile:A,doSave:R,fileAreaRef:O,handleMenuSelect:Z,isShowMenu:P,preventDefault:K,handleFileDrag:M,handleScroll:Y,handleContextMenu:te,isShowRenameInput:Q,handleRename:oe,renameFile:J,menuBlockRef:le,doShowDirInput:F,isShowPop:L,confirmPopConfirm:ie,cancelPopConfirm:se,mkFileRef:ne,handleMkFile:re,doRename:ae,fileAttrRef:G,folderUpload:$,dirStatus:k,handleShortcutKeys:pe,fileClipboard:de,addSelectFile:n,isSelected:r,isClipboard:u,isCtrlx:ce,fileCopyMove:me,fileUploadTypeChoose:ve,folderInputUploadPrehandle:ge,fileUrlRef:we,fileUrlUpload:ye,reset:_e,closeDialog:be,deepCloseDialog:Ce,isZipFile:Lt,untar:he,editPermissions:ke,dirLevels:m,changeDirByLevel:f}}};const ji=(0,Ge.Z)(Ni,[["render",$t],["__scopeId","data-v-ecd907ba"]]);var Ki=ji;const Mi=e=>((0,c.dD)("data-v-5447fae9"),e=e(),(0,c.Cn)(),e),$i=Mi((()=>(0,c._)("div",{style:{"margin-top":"-32px"}},null,-1))),Pi={class:"kk-flex"},Li=Mi((()=>(0,c._)("div",{class:"no-select nowrap form-width"},"TCode：",-1))),Qi=Mi((()=>(0,c._)("div",{class:"no-select nowrap",style:{"background-color":"#f3f4f4","margin-right":"8px"}},"U",-1))),qi=Mi((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),Ji={class:"kk-flex"},Gi={class:"no-select nowrap form-width",style:{"margin-right":"2px"}},Zi=Mi((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),Yi=Mi((()=>(0,c._)("div",{class:"kk-border"},null,-1))),Xi={class:"kk-flex",style:{margin:"7px 0"}},es=Mi((()=>(0,c._)("div",{class:"no-select nowrap"},"Workflow",-1))),ls=Mi((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),ts={"element-loading-text":"Loading...",style:{padding:"0px 5px",width:"100%",height:"30vh"}},os={style:{display:"flex"}},as=Mi((()=>(0,c._)("div",{style:{flex:"1"}},null,-1)));function is(e,l,t,o,a,i){const s=(0,c.up)("CollectionTag"),n=(0,c.up)("el-icon"),r=(0,c.up)("el-input"),u=(0,c.up)("Upload"),d=(0,c.up)("el-button"),p=(0,c.up)("el-upload"),v=(0,c.up)("EditPen"),g=(0,c.up)("Download"),f=(0,c.up)("Refresh"),w=(0,c.up)("el-tooltip"),y=(0,c.up)("DocumentDelete"),h=(0,c.up)("Finished"),k=(0,c.up)("AceEditor"),_=(0,c.up)("el-dialog"),b=(0,c.Q2)("loading");return(0,c.wg)(),(0,c.j4)(_,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[5]||(l[5]=e=>o.DialogVisilble=e),"before-close":o.closeDialog,"destroy-on-close":"",width:550,title:e.$t("自定义TCode"),modal:!1,"modal-class":"kk-dialog-class","align-center":"",draggable:""},{default:(0,c.w5)((()=>[$i,(0,c._)("div",null,[(0,c._)("div",Pi,[Li,Qi,(0,c.Wm)(r,{size:"small",style:{width:"130px"},modelValue:o.userTcodeInfo.name,"onUpdate:modelValue":l[0]||(l[0]=e=>o.userTcodeInfo.name=e),class:"w-50 m-2",placeholder:e.$t("输入TCode"),maxlength:"5",minlength:"1"},{prefix:(0,c.w5)((()=>[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(s)])),_:1})])),_:1},8,["modelValue","placeholder"]),qi,(0,c._)("div",null,[(0,c.Wm)(p,{"show-file-list":!1,"with-credentials":!1,"http-request":o.importTcodes,multiple:!1},{default:(0,c.w5)((()=>[(0,c.Wm)(d,{size:"small",type:"primary"},{default:(0,c.w5)((()=>[(0,c.Wm)(n,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(u)])),_:1}),(0,c.Uk)(" "+(0,m.zw)(e.$t("导入")),1)])),_:1})])),_:1},8,["http-request"])])]),(0,c._)("div",Ji,[(0,c._)("div",Gi,(0,m.zw)(e.$t("描   述"))+"：",1),(0,c.Wm)(r,{size:"small",style:{width:"146px"},modelValue:o.userTcodeInfo.desc,"onUpdate:modelValue":l[1]||(l[1]=e=>o.userTcodeInfo.desc=e),class:"w-50 m-2",placeholder:e.$t("输入TCode描述")},{prefix:(0,c.w5)((()=>[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(v)])),_:1})])),_:1},8,["modelValue","placeholder"]),Zi,(0,c._)("div",null,[(0,c.Wm)(d,{size:"small",type:"primary",onClick:o.exportTcodes},{default:(0,c.w5)((()=>[(0,c.Wm)(n,{class:"el-icon--left"},{default:(0,c.w5)((()=>[(0,c.Wm)(g)])),_:1}),(0,c.Uk)(" "+(0,m.zw)(e.$t("导出")),1)])),_:1},8,["onClick"])])]),Yi,(0,c._)("div",Xi,[es,ls,(0,c._)("div",{onClick:l[2]||(l[2]=e=>o.workflowTab(1)),style:{"font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,c.Wm)(w,{content:e.$t("默认模板"),placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(f)])),_:1})])),_:1},8,["content"])]),(0,c._)("div",{onClick:l[3]||(l[3]=e=>o.workflowTab(2)),style:{"font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,c.Wm)(w,{content:e.$t("清空"),placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(y)])),_:1})])),_:1},8,["content"])]),(0,c._)("div",{onClick:l[4]||(l[4]=e=>o.workflowTab(3)),style:{"font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,c.Wm)(w,{content:e.$t("保存"),placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(h)])),_:1})])),_:1},8,["content"])])]),(0,c.wy)(((0,c.wg)(),(0,c.iD)("div",ts,[(0,c.Wm)(k,{ref:"userTcodeEditorRef",onHandleSave:o.handleSave},null,8,["onHandleSave"])])),[[b,o.loading]])]),(0,c._)("div",os,[as,(0,c.Wm)(d,{size:"small",type:"primary",onClick:o.confirm,style:{"margin-bottom":"-15px","margin-top":"10px"}},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close","title"])}var ss={name:"UserTcode",components:{AceEditor:Yo,CollectionTag:Ue.O$2,EditPen:Ue.qHu,Upload:Ue.gqx,Download:Ue.UWx,Refresh:Ue.hYj,Finished:Ue.qWi,DocumentDelete:Ue.jY0},setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(!1),a="const path = '/root/terminal';\nawait kkTerminal.write('cd ' + path, 1200);\nconst port = 3000;\nawait kkTerminal.write('lsof -ti :' + port, 1200);\nconst resultArr = kkTerminal.read();\nif(resultArr.length >= 2) {\n    const pid = resultArr[1];\n\tif(pid && /^\\d+$/.test(pid)) await kkTerminal.write('kill -9 ' + pid, 1200);\n}\nconst jar = 'kkTerminal.jar';\nawait kkTerminal.write('nohup java -jar ./' + jar + ' > ./out.log &', 1200);",i=(0,N.iH)(),s=(0,N.iH)({name:"",desc:""}),n=e=>{localStorage.setItem("tcode-draft",e),(0,j.z8)({message:Be.global.t("保存成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})},r=e=>{i.value.setValue(e),i.value.resetHistory()},u=()=>{i.value.setLanguage("kk.js"),localStorage.getItem("tcode-draft")&&(i.value.setValue(localStorage.getItem("tcode-draft")),i.value.resetHistory())},d=e=>{const l=/^[A-Za-z0-9]+$/;return l.test(e)},c=e=>{let t=e.file;const a=new FileReader;a.onload=()=>{try{const e=JSON.parse(a.result);let t={},o=0,i=0;for(const l in e)l&&l.length>=2&&l.length<=6&&("U"==l[0]||"u"==l[0])&&d(l)?(t[l.toUpperCase()]={desc:e[l].desc||"",workflow:e[l].workflow||"",status:"Not Active"},o++):((0,j.z8)({message:"TCode-"+l+Be.global.t("：名称非法"),type:"error",grouping:!0}),i++);0==i?(l.emit("importTCodes",t),(0,j.z8)({message:Be.global.t("导入成功"),type:"success",grouping:!0}),f()):0==o?(0,j.z8)({message:Be.global.t("导入失败：无合法TCode"),type:"error",grouping:!0}):(l.emit("importTCodes",t),(0,j.z8)({message:Be.global.t("导入成功：")+o+Be.global.t("个")+Be.global.t("，导入失败：")+i+Be.global.t("个"),type:"warning",grouping:!0}))}catch(e){(0,j.z8)({message:Be.global.t("导入失败：json格式错误"),type:"error",grouping:!0})}finally{o.value=!1}},a.onerror=()=>{(0,j.z8)({message:Be.global.t("导入失败：文件读取失败"),type:"error",grouping:!0}),o.value=!1},o.value=!0,a.readAsText(t)},p=()=>{l.emit("exportTcodes"),(0,j.z8)({message:Be.global.t("导出成功"),type:"success",grouping:!0})},m=e=>{switch(e){case 1:localStorage.removeItem("tcode-draft"),r(a);break;case 2:localStorage.removeItem("tcode-draft"),r("");break;case 3:n(i.value.getValue());break}},v=()=>{if(!(s.value.name&&s.value.name.length>=1&&s.value.name.length<=5))return void(0,j.z8)({message:Be.global.t("TCode不能为空"),type:"error",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER});if(!d(s.value.name))return void(0,j.z8)({message:Be.global.t("TCode只能由字母和数字组成"),type:"error",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER});let e={};e["U"+s.value.name.toUpperCase()]={desc:s.value.desc,workflow:i.value.getValue(),status:"Not Active"},l.emit("importTCodes",e),(0,j.z8)({message:Be.global.t("添加成功"),type:"success",grouping:!0}),localStorage.removeItem("tcode-draft"),f()},g=()=>{i.value&&i.value.reset(),o.value=!1,s.value.name="",s.value.desc="",t.value=!1},f=e=>{setTimeout((()=>{g()}),400),t.value=!1,e&&e()};return{DialogVisilble:t,confirm:v,closeDialog:f,reset:g,userTcodeEditorRef:i,handleSave:n,initText:u,loading:o,userTcodeInfo:s,importTcodes:c,exportTcodes:p,setValue:r,workflowTab:m}}};const ns=(0,Ge.Z)(ss,[["render",is],["__scopeId","data-v-5447fae9"]]);var rs=ns;const us=e=>((0,c.dD)("data-v-807dded8"),e=e(),(0,c.Cn)(),e),ds=us((()=>(0,c._)("div",{style:{"margin-top":"-27px"}},null,-1))),cs={class:"no-select"},ps={style:{height:"210px","overflow-y":"auto"}},ms=us((()=>(0,c._)("span",{style:{"background-color":"#f3f4f4"}},"/",-1))),vs=us((()=>(0,c._)("div",{class:"kk-border"},null,-1))),gs={class:"kk-flex tocde-item",style:{padding:"12px 10px"}},fs={style:{"background-color":"#f3f4f4"}},ws={style:{"margin-left":"25px"}},ys={style:{height:"210px","overflow-y":"auto"}},hs=us((()=>(0,c._)("span",{style:{"background-color":"#f3f4f4"}},"S",-1))),ks=us((()=>(0,c._)("div",{class:"kk-border"},null,-1))),_s={class:"kk-flex tocde-item",style:{padding:"12px 10px"}},bs={style:{"background-color":"#f3f4f4"}},Cs={style:{"margin-left":"25px"}},xs={style:{height:"210px","overflow-y":"auto"}},Ss={class:"kk-flex",style:{"margin-bottom":"12px","margin-top":"-6px"}},Is={style:{"margin-top":"3px"}},Ds={style:{cursor:"pointer","margin-left":"10px"}},Ts=us((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),zs=us((()=>(0,c._)("div",{style:{"margin-left":"10px"}},null,-1))),Ws={style:{width:"100%",height:"178px"}},Es=us((()=>(0,c._)("span",{style:{"background-color":"#f3f4f4"}},"U",-1))),Vs=us((()=>(0,c._)("div",{class:"kk-border"},null,-1))),Fs={class:"kk-flex tocde-item",style:{padding:"12px 10px"}},Us={class:"kk-flex",style:{width:"60px"}},Hs={style:{"background-color":"#f3f4f4"}},As=us((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),Rs={class:"ellipsis",style:{"margin-left":"10px"}},Os=us((()=>(0,c._)("div",{style:{flex:"1"}},null,-1))),Bs={style:{cursor:"pointer","margin-left":"10px"}},Ns=["onClick"],js=us((()=>(0,c._)("span",{style:{"background-color":"#f3f4f4"}},"U",-1))),Ks=us((()=>(0,c._)("div",{class:"kk-border"},null,-1))),Ms=us((()=>(0,c._)("div",{style:{"margin-top":"20px"}},null,-1)));function $s(e,l,t,o,a,i){const s=(0,c.up)("el-tab-pane"),n=(0,c.up)("ArrowLeft"),r=(0,c.up)("el-icon"),u=(0,c.up)("TcodeStatus"),d=(0,c.up)("el-tooltip"),p=(0,c.up)("Edit"),v=(0,c.up)("Delete"),g=(0,c.up)("View"),f=(0,c.up)("Finished"),w=(0,c.up)("AceEditor"),y=(0,c.up)("ArrowRight"),h=(0,c.up)("NoData"),k=(0,c.up)("el-tabs"),_=(0,c.up)("el-dialog");return(0,c.wg)(),(0,c.j4)(_,{modelValue:o.DialogVisilble,"onUpdate:modelValue":l[5]||(l[5]=e=>o.DialogVisilble=e),"destroy-on-close":"",width:480,title:e.$t("帮助"),modal:!1,"modal-class":"kk-dialog-class","before-close":o.closeDialog,draggable:""},{default:(0,c.w5)((()=>[ds,(0,c._)("div",cs,[(0,c.Wm)(k,{type:"border-card"},{default:(0,c.w5)((()=>[(0,c.Wm)(s,{label:e.$t("功能TCode")},{default:(0,c.w5)((()=>[(0,c._)("div",ps,[(0,c._)("div",null,[(0,c.Uk)((0,m.zw)(e.$t("以"))+" ",1),ms,(0,c.Uk)(" "+(0,m.zw)(e.$t("开头，用于快速执行通用功能")),1)]),vs,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.FuncTcode,((e,l)=>((0,c.wg)(),(0,c.iD)("div",{key:l},[(0,c._)("div",gs,[(0,c._)("div",fs,(0,m.zw)(l),1),(0,c._)("div",ws,(0,m.zw)(e.desc),1)])])))),128))])])),_:1},8,["label"]),(0,c.Wm)(s,{label:e.$t("系统TCode")},{default:(0,c.w5)((()=>[(0,c._)("div",ys,[(0,c._)("div",null,[(0,c.Uk)((0,m.zw)(e.$t("以"))+" ",1),hs,(0,c.Uk)(" "+(0,m.zw)(e.$t("开头，用于快速访问系统模块")),1)]),ks,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.SysTcode,((e,l)=>((0,c.wg)(),(0,c.iD)("div",{key:l},[(0,c._)("div",_s,[(0,c._)("div",bs,(0,m.zw)(l),1),(0,c._)("div",Cs,(0,m.zw)(e.desc),1)])])))),128))])])),_:1},8,["label"]),(0,c.Wm)(s,{label:e.$t("用户TCode")},{default:(0,c.w5)((()=>[(0,c._)("div",xs,[o.userTCodes&&Object.keys(o.userTCodes).length>0?((0,c.wg)(),(0,c.iD)(c.HY,{key:0},[o.nowTCode&&o.nowTCode.length>=2&&o.nowTCode.length<=6?((0,c.wg)(),(0,c.iD)(c.HY,{key:0},[(0,c._)("div",Ss,[(0,c._)("div",{onClick:l[0]||(l[0]=(...e)=>o.toOverview&&o.toOverview(...e)),style:{"margin-right":"10px",cursor:"pointer","font-size":"16px"}},[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(n)])),_:1})]),(0,c._)("div",Is,(0,m.zw)(o.modifyTag+o.nowTCode),1),(0,c._)("div",Ds,[(0,c.Wm)(d,{content:o.TCodeStatusEnum[o.userTCodes[o.nowTCode].status],placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(u,{style:{fontSize:"18px"},status:o.userTCodes[o.nowTCode].status},null,8,["status"])])),_:1},8,["content"])]),Ts,0==o.mode?((0,c.wg)(),(0,c.iD)("div",{key:0,onClick:l[1]||(l[1]=(...e)=>o.doModifyTCode&&o.doModifyTCode(...e)),style:{"margin-top":"-3px","font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,c.Wm)(d,{content:e.$t("编辑"),placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(p)])),_:1})])),_:1},8,["content"])])):(0,c.kq)("",!0),0==o.mode?((0,c.wg)(),(0,c.iD)("div",{key:1,onClick:l[2]||(l[2]=(...e)=>o.confirmDeleteTCode&&o.confirmDeleteTCode(...e)),style:{"margin-top":"-3px","font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,c.Wm)(d,{content:e.$t("删除"),placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(v)])),_:1})])),_:1},8,["content"])])):(0,c.kq)("",!0),1==o.mode?((0,c.wg)(),(0,c.iD)("div",{key:2,onClick:l[3]||(l[3]=(...e)=>o.doOnlyRead&&o.doOnlyRead(...e)),style:{"margin-top":"-3px","font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,c.Wm)(d,{content:e.$t("只读"),placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(g)])),_:1})])),_:1},8,["content"])])):(0,c.kq)("",!0),1==o.mode?((0,c.wg)(),(0,c.iD)("div",{key:3,onClick:l[4]||(l[4]=(...e)=>o.doSaveTCode&&o.doSaveTCode(...e)),style:{"margin-top":"-3px","font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,c.Wm)(d,{content:e.$t("保存修改"),placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(f)])),_:1})])),_:1},8,["content"])])):(0,c.kq)("",!0),zs]),(0,c._)("div",Ws,[(0,c.Wm)(w,{ref:"userTcodeEditorRef",onHandleChange:o.handleChange,onHandleSave:o.doSaveTCode},null,8,["onHandleChange","onHandleSave"])])],64)):((0,c.wg)(),(0,c.iD)(c.HY,{key:1},[(0,c._)("div",null,[(0,c.Uk)((0,m.zw)(e.$t("以"))+" ",1),Es,(0,c.Uk)(" "+(0,m.zw)(e.$t("开头，自定义实现类似Shell脚本的自动化Workflow")),1)]),Vs,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(o.userTCodes,((e,l)=>((0,c.wg)(),(0,c.iD)("div",{key:l},[(0,c._)("div",Fs,[(0,c._)("div",Us,[(0,c._)("div",Hs,(0,m.zw)(l),1),As]),(0,c._)("div",Rs,(0,m.zw)(e.desc),1),Os,(0,c._)("div",Bs,[(0,c.Wm)(d,{content:o.TCodeStatusEnum[e.status],placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(u,{style:{fontSize:"18px"},status:e.status},null,8,["status"])])),_:2},1032,["content"])]),(0,c._)("div",{onClick:e=>o.toWorkflow(l),style:{"margin-left":"15px",cursor:"pointer","font-size":"16px"}},[(0,c.Wm)(r,null,{default:(0,c.w5)((()=>[(0,c.Wm)(y)])),_:1})],8,Ns)])])))),128))],64))],64)):((0,c.wg)(),(0,c.iD)(c.HY,{key:1},[(0,c._)("div",null,[(0,c.Uk)((0,m.zw)(e.$t("以"))+" ",1),js,(0,c.Uk)(" "+(0,m.zw)(e.$t("开头，自定义实现类似Shell脚本的自动化Workflow")),1)]),Ks,(0,c.Wm)(h,{height:"160px"},{myslot:(0,c.w5)((()=>[Ms])),_:1})],64))])])),_:1},8,["label"])])),_:1})])])),_:1},8,["modelValue","title","before-close"])}function Ps(e,l,t,o,a,i){const s=(0,c.up)("CircleCloseFilled"),n=(0,c.up)("el-icon"),r=(0,c.up)("WarningFilled"),u=(0,c.up)("SuccessFilled"),d=(0,c.up)("InfoFilled");return-2==o.statusType?((0,c.wg)(),(0,c.iD)("div",{key:0,style:(0,m.j5)(o.statusStyle)},[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(s)])),_:1})],4)):-1==o.statusType?((0,c.wg)(),(0,c.iD)("div",{key:1,style:(0,m.j5)(o.statusStyle)},[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(r)])),_:1})],4)):1==o.statusType?((0,c.wg)(),(0,c.iD)("div",{key:2,style:(0,m.j5)(o.statusStyle)},[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(u)])),_:1})],4)):((0,c.wg)(),(0,c.iD)("div",{key:3,style:(0,m.j5)(o.statusStyle)},[(0,c.Wm)(n,null,{default:(0,c.w5)((()=>[(0,c.Wm)(d)])),_:1})],4))}var Ls={name:"TcodeStatus",components:{SuccessFilled:Ue.c5o,WarningFilled:Ue.Rrw,CircleCloseFilled:Ue.Tw$,InfoFilled:Ue.cEj},props:{status:{type:String,default:"success"},style:{type:Object,default:()=>{}}},setup(e){const l={"Compile Error":-2,"Execute Interrupt":-1,"Not Active":0,"Execute Success":1},t=["#f56c6c","#e6a23c","#909399","#67c23a"],o=(0,c.Fl)((()=>l[e.status]||0)),a=(0,c.Fl)((()=>({fontSize:"16px",...e.style,color:t[(l[e.status]||0)+2]})));return{statusStyle:a,statusType:o}}};const Qs=(0,Ge.Z)(Ls,[["render",Ps]]);var qs=Qs,Js={name:"HelpTcode",components:{NoData:Ye,TcodeStatus:qs,AceEditor:Yo,ArrowRight:Ue.olP,ArrowLeft:Ue.XdH,Edit:Ue.I8b,View:Ue.G7x,Finished:Ue.qWi,Delete:Ue.HG3},setup(e,l){const t=(0,N.iH)(!1),o=(0,N.iH)(""),a=(0,N.iH)({}),i=(0,N.iH)(""),s=(0,N.iH)(!1),n=e=>{i.value=e,s.value=!1,setTimeout((()=>{c(!0)}),1)},r=()=>{s.value=!1,i.value="",o.value=""},d=(0,N.iH)(),c=e=>{d.value.setLanguage("kk.js"),d.value.setValue(JSON.parse(u(localStorage.getItem("tcodes")))[i.value].workflow||""),d.value.resetHistory(),d.value.setReadOnly(e),o.value=""},p=()=>{s.value=!0,c(!1)},m=()=>{s.value=!1,c(!0)},v=()=>{"*"==o.value&&(l.emit("handleSaveTCode",i.value,d.value.getValue()),m(),(0,j.z8)({message:Be.global.t("修改成功"),type:"success",grouping:!0}),o.value="")},g=()=>{Ne(Be.global.t("提示"),Be.global.t("确定删除此TCode吗?"),f)},f=()=>{l.emit("handleDeleteTCode",i.value),(0,j.z8)({message:Be.global.t("删除成功"),type:"success",grouping:!0}),r()},w=()=>{o.value="*"},y=()=>{d.value&&d.value.reset(),s.value=!1,i.value="",o.value="",t.value=!1},h=e=>{setTimeout((()=>{y()}),400),t.value=!1,e&&e()};return{DialogVisilble:t,FuncTcode:Ko,SysTcode:Mo,nowTCode:i,toWorkflow:n,toOverview:r,userTCodes:a,userTcodeEditorRef:d,initTcodeEditor:c,TCodeStatusEnum:qo,mode:s,doModifyTCode:p,doOnlyRead:m,doSaveTCode:v,confirmDeleteTCode:g,doDeleteTCode:f,handleChange:w,modifyTag:o,reset:y,closeDialog:h}}};const Gs=(0,Ge.Z)(Js,[["render",$s],["__scopeId","data-v-807dded8"]]);var Zs=Gs;const Ys=()=>{localStorage.getItem("user")||localStorage.setItem("user",r(crypto.randomUUID()+"@"+Z(16)+"@"+(new Date).getTime()));const e=u(localStorage.getItem("user")).split("@");return{name:e[0],key:e[1],time:Number(e[2])}},Xs=async(e,l,t)=>{if(!t)return;const o=Ys(),i=new Blob([r(t,o.key)],{type:"application/octet-stream"}),s=new File([i],l);let n=new FormData;n.append("user",o.name),n.append("type",e),n.append("name",l),n.append("file",s),await a().ajax({url:q+"/cloud",type:"post",data:n,contentType:!1,processData:!1,success(e){"success"!=e.status&&(506==e.code?(0,j.z8)({message:Be.global.t("云端文件过多"),type:e.status,grouping:!0}):(0,j.z8)({message:Be.global.t("云端同步失败"),type:e.status,grouping:!0}))}})},en=async e=>{const l=Ys();let t=null;return await a().ajax({url:q+"/load",method:"GET",data:{time:(new Date).getTime(),user:l.name,fileName:e},success(e){"success"==e.status?t=JSON.parse(u(e.data,l.key)):(0,j.z8)({message:Be.global.t("云端文件加载失败"),type:e.status,grouping:!0})}}),t},ln=["options","tcodes"],tn=864e5,on=async()=>{const e=Ys();if(!((new Date).getTime()-e.time<tn))for(let l=0;l<ln.length;l++){const e=u(localStorage.getItem(ln[l]));await Xs(ln[l],"",e)}},an=async()=>{for(let e=0;e<ln.length;e++){const l=await en(ln[e]);l&&localStorage.setItem(ln[e],r(JSON.stringify(l)))}window.location.reload()};var sn={name:"FrameWork",components:{ConnectSetting:zl,StyleSetting:ft,FileBlock:Ki,UserTcode:rs,HelpTcode:Zs,QuestionFilled:Ue.Ruj,VideoPlay:Ue.GhU,VideoPause:Ue.lBU,MostlyCloudy:Ue.UBh},setup(){const e=(0,N.iH)({Fail:"Fail to connect remote server !\r\n",Success:"Connecting success !\r\n",Connecting:"Connecting to remote server ...\r\n",Disconnected:"Disconnect to remote server.\r\n"}),l=(0,N.iH)(e.value["Connecting"]),t=(0,c.FN)(),{toClipboard:o}=(0,B.Z)(),i=new M.FitAddon,s=(0,N.iH)(!1),n=(0,N.iH)(""),d=(0,N.iH)([]),p=()=>{n.value=crypto.randomUUID(),d.value=[],d.value.push({time:(new Date).getTime(),content:"Record "+n.value+" Start.\r\n"}),s.value=!0},m=async()=>{s.value=!1,d.value.push({time:(new Date).getTime(),content:"\r\nRecord "+n.value+" Over."}),await Xs("record-",n.value,JSON.stringify(d.value)),await o(Il()+"?record="+n.value),(0,j.z8)({message:Be.global.t("录像链接已复制"),type:"success",grouping:!0})},v=e=>{const l=d.value[e];l&&E(l.content);const t=d.value[e+1];t&&setTimeout((()=>{v(e+1)}),t.time-l.time)},g=()=>{Ne(Be.global.t("提示"),Be.global.t("确定从云端覆盖本地数据吗?"),an)},f=(0,N.iH)({}),w=(0,N.iH)({}),y=()=>{localStorage.getItem("options")?w.value=JSON.parse(u(localStorage.getItem("options"))):w.value={}};y();const h=(0,N.iH)({}),k=()=>{h.value={},localStorage.getItem("tcodes")&&(h.value=JSON.parse(u(localStorage.getItem("tcodes")))),setTimeout((()=>{pe.value.userTCodes={...h.value}}),1)};k();const _=(0,N.iH)($),b=(0,N.iH)(Sl()),C=()=>{localStorage.getItem("env")&&(_.value={..._.value,...JSON.parse(u(localStorage.getItem("env")))});for(const l in b.value)l in _.value&&-1==l.lastIndexOf("_")&&(_.value[l]=b.value[l]);let e=w.value[_.value["option"]];e?_.value={..._.value,...e}:_.value.option="",b.value.option=_.value.option,b.value.record?("headless"!=b.value.mode&&"pure"!=b.value.mode&&(b.value.mode="pure"),l.value=""):b.value.record="",Be.global.locale=_.value.lang||"en"};C();const x=(e,l)=>{e&&(w.value={...w.value,[e]:l}),localStorage.setItem("options",r(JSON.stringify(w.value))),y()},S=e=>{delete w.value[e],x(null,null),_.value.option&&_.value.option==e&&L({option:""},!1)},I=(0,N.iH)();let D=null;const T=(0,N.iH)(!0),z=()=>{D=new K.Terminal({rendererType:"canvas",convertEol:!0,scrollback:0,disableStdin:!1,cursorStyle:_.value.cursorStyle,cursorBlink:_.value.cursorBlink,theme:{foreground:_.value.fg,background:_.value.bg,cursor:"help"},lineHeight:1.2,fontFamily:_.value.fontFamily,fontSize:_.value.fontSize}),D.loadAddon(i)},W=()=>{if(I.value.style.height=window.innerHeight-("headless"!=b.value.mode?25:0)+"px",i.fit(),F.value&&F.value.readyState==WebSocket.OPEN&&D){let e=i.proposeDimensions().rows,l=i.proposeDimensions().cols;F.value.send(r(JSON.stringify({type:1,content:"",rows:e,cols:l}))),D.resize(l,e)}},E=e=>{D.write(e),D.options.scrollback+=D._core.buffer.lines.length},V=(0,N.iH)(""),F=(0,N.iH)(null),U=()=>{F.value=new WebSocket(Q+J(r(JSON.stringify(_.value)))),F.value.onopen=()=>{W()},F.value.onmessage=t=>{let o=JSON.parse(t.data);if(-1==o.code&&(D.clear(),l.value=e.value["Fail"],E(l.value),setTimeout((()=>{le(1)}),400)),0==o.code&&(D.clear(),l.value=e.value["Success"],V.value=u(o.data),setTimeout((()=>{W()}),1)),1==o.code){let e=u(o.data);$o.active&&$o.outArray.push(e),s.value&&d.value.push({time:(new Date).getTime(),content:e}),$o.active&&!$o.display||E(e)}},F.value.onclose=t=>{l.value==e.value["Success"]&&3333!=t.code&&(V.value="",ae(),l.value=e.value["Disconnected"],E("\r\n"+l.value)),re()}},H=(0,N.iH)(!1),A=()=>{H.value=!H.value},R=(0,N.iH)(),O=(0,N.iH)(),P=(0,N.iH)(),L=(e,l=!0)=>{let t={};t=localStorage.getItem("env")?JSON.parse(u(localStorage.getItem("env"))):$,t={...t,...e},localStorage.setItem("env",r(JSON.stringify(t)));for(const o in e)o in b.value&&(b.value[o]=e[o]);l&&le(3)},G=(e,l=!1)=>{F.value&&(T.value&&(W(),T.value=!1),$o.active===l&&F.value.send(r(JSON.stringify({type:0,content:e,rows:0,cols:0}))))},Z=e=>{e.preventDefault(),G(e.target.value),e.target.value=""},Y=async function(e){e.preventDefault();let l=await navigator.clipboard.readText();G(l)},X=()=>{H.value=!1},ee=()=>{D&&I.value&&(I.value.removeEventListener("contextmenu",Y),I.value.removeEventListener("compositionend",Z),I.value.removeEventListener("click",X)),I.value.innerHTML="",T.value=!0,C(),z(),D.open(I.value),W(),I.value.addEventListener("compositionend",Z),D.onKey((e=>{G(e.key)})),D.onSelectionChange((async()=>{if(D.hasSelection()){let e=D.getSelection(),l=e.trim();l&&""!=l&&await o(e)}})),I.value.addEventListener("contextmenu",Y),I.value.addEventListener("click",X),E(l.value)},le=t=>{1==t?(H.value=!1,R.value.DialogVisilble=!0):2==t?(H.value=!1,O.value.DialogVisilble=!0):3==t?(H.value=!1,l.value=e.value["Connecting"],V.value="",F.value&&F.value.close(3333),ae(),ee(),U()):4==t&&(H.value=!1,P.value.getInitDir(),P.value.DialogVisilble=!0)};let te=null;const oe=()=>{null==te&&(te=setInterval((()=>{F.value&&F.value.readyState==WebSocket.OPEN&&F.value.send(r(JSON.stringify({type:2,content:"",rows:0,cols:0}))),"Linux"!=f.value.serverOS&&a().ajax({url:q+"/beat",type:"post",data:{windowId:f.value.windowId},success(){}})}),25e3))},ae=()=>{P.value&&P.value.deepCloseDialog()},ie=(e,l)=>{h.value[e].status=l,localStorage.setItem("tcodes",r(JSON.stringify(h.value))),setTimeout((()=>{pe.value.userTCodes={...h.value}}),1)},se=(0,N.iH)(""),ne=async()=>{if(!se.value||se.value.length<2)return;let e=se.value.toUpperCase();if(se.value="","/"==e[0]&&Ko[e])Ko[e].execFlow(t);else if("S"==e[0]&&Mo[e])Mo[e].execFlow(t);else if("U"==e[0]&&h.value[e])if($o.writeOnly||($o.writeOnly=G),0==$o.active){if(re(),$o.active=!0,!h.value[e].execFlow||!(h.value[e].execFlow instanceof Function)){let t=h.value[e].workflow.toString();try{h.value[e].execFlow=new Function("kkTerminal",`return (async function() { ${t} })()`)}catch(l){return ie(e,"Compile Error"),(0,j.z8)({message:"TCode-"+e+" Compile Error: "+l,type:"error",grouping:!0}),void re()}}try{await h.value[e].execFlow($o),(0,j.z8)({message:"TCode-"+e+" Workflow Over",type:"success",grouping:!0}),ie(e,"Execute Success")}catch(l){(0,j.z8)({message:"TCode-"+e+" Execute Interrupt: "+l,type:"warning",grouping:!0}),ie(e,"Execute Interrupt")}finally{re()}}else(0,j.z8)({message:"Another TCode is executing",type:"warning",grouping:!0});else"/"==e[0]||"S"==e[0]||"U"==e[0]?(0,j.z8)({message:"TCode-"+e+" does not exist",type:"warning",grouping:!0}):(0,j.z8)({message:Be.global.t("TCode必须以 /,S,U 开头"),type:"warning",grouping:!0})},re=()=>{$o.active=!1,$o.display=!0,$o.outArray=[],$o.cnt=0},ue=(0,N.iH)(),de=e=>{let l={};l={...h.value,...e},localStorage.setItem("tcodes",r(JSON.stringify(l))),k()},ce=()=>{let e={};localStorage.getItem("tcodes")&&(e=JSON.parse(u(localStorage.getItem("tcodes"))));const l=new Blob([JSON.stringify(e,null,4)],{type:"text/plain"}),t=URL.createObjectURL(l),o=document.createElement("a");o.href=t,o.download="TCode.json",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)},pe=(0,N.iH)(),me=(e,l)=>{let t={};t[e]={desc:h.value[e].desc||"",workflow:l||"",status:"Not Active"},de(t)},ve=e=>{delete h.value[e],de({})};return(0,c.bv)((async()=>{if(ee(),b.value.record)return d.value=await en("record-"+b.value.record),void(d.value&&v(0));_.value.cloud&&on(),a().ajax({url:q+"/init",type:"get",data:{time:(new Date).getTime()},success(e){f.value={...e.data},U(),window.addEventListener("resize",(()=>{P.value&&(P.value.isShowMenu=!1,P.value.isShowPop=!1),W()})),oe()}})})),(0,c.Ah)((()=>{D&&I.value&&(I.value.removeEventListener("contextmenu",Y),I.value.removeEventListener("compositionend",Z),I.value.removeEventListener("click",X)),te&&clearInterval(te)})),{recording:s,startRecord:p,stopRecord:m,cloudSync:g,env:_,urlParams:b,options:w,now_connect_status:l,connect_status:e,terminal:I,doSSHConnect:U,socket:F,showSettings:A,isShowSetting:H,doSettings:le,connectSettingRef:R,styleSettingRef:O,fileBlockRef:P,saveEnv:L,sshKey:V,doHeartBeat:oe,saveOp:x,deleteOp:S,tcode:se,handleTcode:ne,closeFileBlock:ae,resetTerminal:ee,tcodes:h,userTcodeRef:ue,sendMessage:G,importTCodes:de,exportTcodes:ce,helpTcodeRef:pe,handleSaveTCode:me,handleDeleteTCode:ve,osInfo:f}}};const nn=(0,Ge.Z)(sn,[["render",O],["__scopeId","data-v-74e69f79"]]);var rn=nn,un={name:"App",components:{FrameWork:rn}};const dn=(0,Ge.Z)(un,[["render",p]]);var cn=dn,pn=(t(4415),t(3441)),mn=t(7086),vn=t(1015),gn=t(3370),fn=t(5276),wn=t(5868),yn=t(881),hn=t(9695),kn=t(4133),_n=t(1450),bn=t(6199),Cn=t(8631),xn=t(4775),Sn=t(3838),In=t(7919),Dn=t(1902),Tn=t(2563),zn=t(5097);a().ajaxSetup({processData:!0,xhrFields:{withCredentials:!0},dataFilter(e){e=JSON.parse(e);let l=e.data;return l&&(e.data=JSON.parse(u(e.data))),JSON.stringify(e)}});const Wn=(0,d.ri)(cn);Wn.use(pn.ElButton).use(mn.d0).use(vn.gn).use(gn.EZ).use(fn.LW).use(wn.$).use(yn.Ub).use(yn.p8).use(hn.b9).use(kn.Q0).use(_n.Xb),Wn.use(bn.YK).use(bn.o2).use(bn.Df).use(Cn.OX).use(xn.kN).use(Sn.KD).use(Sn.rh).use(In.$t).use(Dn.Ks).use(Tn.i1).use(zn.d6),Wn.use(Be),Wn.mount("#app"),Wn.config.warnHandler=()=>{}},2480:function(){},5832:function(){}},l={};function t(o){var a=l[o];if(void 0!==a)return a.exports;var i=l[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,function(){t.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];t.O=function(l,o,a,i){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],i=e[d][2];for(var n=!0,r=0;r<o.length;r++)(!1&i||s>=i)&&Object.keys(t.O).every((function(e){return t.O[e](o[r])}))?o.splice(r--,1):(n=!1,i<s&&(s=i));if(n){e.splice(d--,1);var u=a();void 0!==u&&(l=u)}}return l}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,a,i]}}(),function(){t.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(l,{a:l}),l}}(),function(){t.d=function(e,l){for(var o in l)t.o(l,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:l[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(l){return 0===e[l]};var l=function(l,o){var a,i,s=o[0],n=o[1],r=o[2],u=0;if(s.some((function(l){return 0!==e[l]}))){for(a in n)t.o(n,a)&&(t.m[a]=n[a]);if(r)var d=r(t)}for(l&&l(o);u<s.length;u++)i=s[u],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},o=self["webpackChunkterminal"]=self["webpackChunkterminal"]||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(9796)}));o=t.O(o)})();
//# sourceMappingURL=app.9f7d5c76.js.map